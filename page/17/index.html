<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>Keep learn! | 愚昧无知。 ▄︻┳═一</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><header class="wrapper header"><div class="container blog-title"><a class="title" id="logo" href="/.">Keep learn!</a><span class="subtitle">愚昧无知。 ▄︻┳═一</span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div><input id="menu" type="checkbox"><div class="container nav-items"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a><a class="sidebar-nav-item" href="/about">About</a></div></header><article class="wrapper"><div class="container entries" id="index-main"><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/09/Memcached-Tomcat-Session-Manager/">Tomcat + Memcached session manager共享session</a></div><div class="post-content"><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><center><img src="https://houhaiyun.github.io/img/images/Memcached-Tomcat-Session-Manager-1.jpg" title="拓扑图"></center>

<table>
<thead>
<tr>
<th>服务</th>
<th>IP</th>
<th>系统版本</th>
<th>软件版本</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nginx</td>
<td>192.168.8.17/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>nginx.x86_64 1:1.10.2</td>
<td>反向代理</td>
</tr>
<tr>
<td>Tomcat1</td>
<td>192.168.8.12/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
<tr>
<td>Tomcat2</td>
<td>192.168.8.15/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
<tr>
<td>Memcached1</td>
<td>192.168.8.11/24</td>
<td>CentOS release 6.9 (Final)</td>
<td>memcached.x86_64 0:1.4.4-5</td>
<td>缓存服务</td>
</tr>
<tr>
<td>Memcached2</td>
<td>192.168.8.13/24</td>
<td>CentOS release 6.9 (Final)</td>
<td>memcached.x86_64 0:1.4.4-5</td>
<td>缓存服务</td>
</tr>
</tbody>
</table>
<p>简单说明下：<code>tomcat1</code>为主要把它的<code>session</code>存储到<code>memcached2</code>上，而<code>memcache2</code>是运行在另一台主机上的（一般情况下，<code>memcached</code>是存<code>tomcat1</code>的<code>session</code>），只有当<code>memcached2</code>不可用时，<code>tomcat1</code>才会把<code>session</code>存在<code>memcached1</code>上，也就是说<code>memcached1</code>是为了<code>tomcat1</code>做故障切换用的节点。这要的话，当<code>machine1</code>挂了的时候，<code>session</code>是不会丢失的。</p></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Memcached/">Memcached</a></div><div class="post-time">2017-11-09</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/09/Memcached-Install-Changyong-Commands/">Memcached安装和常用命令</a></div><div class="post-content"><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>安装通过<code>yum</code>直接安装即可，也可去官网下载源码编译。</p></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Memcached/">Memcached</a></div><div class="post-time">2017-11-09</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/09/Memcached/">Memcached</a></div><div class="post-content"><center><img src="https://houhaiyun.github.io/img/images/Memcached-1.jpg" title="Memcached"></center></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Memcached/">Memcached</a></div><div class="post-time">2017-11-09</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/08/Tomcat-Session-Jiqun/">搭建Tomcat会话集群</a></div><div class="post-content"><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><center><img src="https://houhaiyun.github.io/img/images/Tomcat-Session-Jiqun-1.jpg" title="拓扑图"></center>

<table>
<thead>
<tr>
<th>服务</th>
<th>IP</th>
<th>系统版本</th>
<th>软件版本</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Httpd</td>
<td>192.168.8.17/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>httpd.x86_64 0:2.4.6-45</td>
<td>反向代理</td>
</tr>
<tr>
<td>Tomcat1</td>
<td>192.168.8.12/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
<tr>
<td>Tomcat2</td>
<td>192.168.8.15/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
</tbody>
</table></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Tomcat/">Tomcat</a></div><div class="post-time">2017-11-08</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/08/Tomcat-Httpd-session-Bangding-Tomcat/">实现httpd会话绑定</a></div><div class="post-content"><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><center><img src="https://houhaiyun.github.io/img/images/Tomcat-Httpd-session-Bangding-Tomcat-1.jpg" title="拓扑图"></center>

<table>
<thead>
<tr>
<th>服务</th>
<th>IP</th>
<th>系统版本</th>
<th>软件版本</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Httpd</td>
<td>192.168.8.17/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>httpd.x86_64 0:2.4.6-45</td>
<td>反向代理</td>
</tr>
<tr>
<td>Tomcat1</td>
<td>192.168.8.12/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
<tr>
<td>Tomcat2</td>
<td>192.168.8.15/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
</tbody>
</table></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Tomcat/">Tomcat</a></div><div class="post-time">2017-11-08</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/07/Tomcat-Httpd-ajp-Diaodu-Tomcat/">Httpd基于ajp协议调度Tomcat集群</a></div><div class="post-content"><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><center><img src="https://houhaiyun.github.io/img/images/Tomcat-Httpd-ajp-Diaodu-Tomcat-1.jpg" title="拓扑图"></center><br><center> 拓扑</center>

<table>
<thead>
<tr>
<th>服务</th>
<th>IP</th>
<th>系统版本</th>
<th>软件版本</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Httpd</td>
<td>192.168.8.17/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>httpd.x86_64 0:2.4.6-45</td>
<td>反向代理</td>
</tr>
<tr>
<td>Tomcat1</td>
<td>192.168.8.12/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
<tr>
<td>Tomcat2</td>
<td>192.168.8.15/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
</tbody>
</table></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Tomcat/">Tomcat</a></div><div class="post-time">2017-11-07</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/07/Tomcat-Httpd-http-Diaodu-Tomcat/">Httpd基于http协议调度Tomcat集群</a></div><div class="post-content"><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><center><img src="https://houhaiyun.github.io/img/images/Tomcat-Httpd-http-Diaodu-Tomcat-1.jpg" title="拓扑图"></center><br><center> 拓扑</center>

<table>
<thead>
<tr>
<th>服务</th>
<th>IP</th>
<th>系统版本</th>
<th>软件版本</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Httpd</td>
<td>192.168.8.17/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>httpd.x86_64 0:2.4.6-45</td>
<td>反向代理</td>
</tr>
<tr>
<td>Tomcat1</td>
<td>192.168.8.12/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
<tr>
<td>Tomcat2</td>
<td>192.168.8.15/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
</tbody>
</table></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Tomcat/">Tomcat</a></div><div class="post-time">2017-11-07</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/07/Tomcat-Nginx-Diaodu-Tomcat/">Nginx调度Tomcat集群</a></div><div class="post-content"><h3 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h3><center><img src="https://houhaiyun.github.io/img/images/Tomcat-Nginx-Diaodu-Tomcat-1.jpg" title="拓扑图"></center>

<center> 拓扑</center>

<table>
<thead>
<tr>
<th>服务</th>
<th>IP</th>
<th>系统版本</th>
<th>软件版本</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nginx</td>
<td>192.168.8.17/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>nginx.x86_64 1:1.10.2</td>
<td>反向代理</td>
</tr>
<tr>
<td>Tomcat1</td>
<td>192.168.8.12/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
<tr>
<td>Tomcat2</td>
<td>192.168.8.15/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>tomcat-7.0.69(java-1.8.0-openjdk)</td>
<td>应用服务</td>
</tr>
</tbody>
</table></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Tomcat/">Tomcat</a></div><div class="post-time">2017-11-07</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/07/Tomcat-Keep-Session/">会话保持解决方案</a></div><div class="post-content"><h3 id="一、为什么需要会话保持"><a href="#一、为什么需要会话保持" class="headerlink" title="一、为什么需要会话保持"></a>一、为什么需要会话保持</h3><p>如果我们将后端的Web服务器分为两组，一组是静态内容服务器，一组是动态内容服务器，那么我们再进行反向代理的时候，反向代理服务器通过判断资源文件的后缀名，决定将其调度至后端的那一组服务上。如果我们的后端服务器静态内容和动态内容都分别有多台，那么反向代理服务器还需要对其进行负载均衡，然后觉得资源调度到那一台服务器。那么对于静态内容的服务器，因为静态内容是不会处理会话的，所以在进行负载均衡时我们不用考虑其会话保持。做最简单的和最直接的轮询就好了，如果服务器的性能不一样的话，就做加权轮询即可。当然如果说后端静态服务器的资源大小区别也非常大，那么轮询的方式对负载均衡的方式来讲，效果不是特别明显，那可能需要使用最少连接数的负载均衡方式来处理这类资源情况，最少连接是可以考虑当前连接的服务器的负载情况，能保证结果公平。这是对于静态内容的服务器来说，那么对于动态内容的服务器，因为动态内容涉及到处理会话，我们就需要考虑负载均衡间服务器的会话保持了。会话保持是指在负载均衡器上有一种机制，在作负载均衡的同时，还保证同一用户相关连的访问请求会被分配到同一台服务器上。</p></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Tomcat/">Tomcat</a></div><div class="post-time">2017-11-07</div></div></div></div><div class="post-entry"><div class="post-desc"><div class="post-title"><a href="/2017/11/07/Tomcat-Session/">HTTP会话原理解释与应用</a></div><div class="post-content"><h3 id="一、什么是会话"><a href="#一、什么是会话" class="headerlink" title="一、什么是会话"></a>一、什么是会话</h3><p> 首先解释一下什么是会话。在计算机术语中，会话是指一个终端用户与交互系统进行通讯的过程，比如从输入账户密码进入操作系统到退出操作系统就是一个会话过程。会话较多用于网络上，TCP的三次握手就创建了一个会话，TCP关闭连接就是关闭会话。用平述的语言可以解释为：你拔打你女友的电话号码，你女友接听，然后一翻“亲爱的”，直到任何一方挂掉电话，这个过程就是一个会话。你挑逗一只小狗，它跟你互动，也是会话；它不鸟你，那就不形成会话。</p></div><div class="post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Tomcat/">Tomcat</a></div><div class="post-time">2017-11-07</div></div></div></div></div></article><div class="wrapper page-navigator-wrapper"><div class="page-navigator"><a class="extend prev" rel="prev" href="/page/16/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="page-number" href="/page/16/">16</a><span class="page-number current">17</span><a class="page-number" href="/page/18/">18</a><a class="page-number" href="/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="extend next" rel="next" href="/page/18/">Next &raquo;</a></div></div><footer class="footer wrapper"><div class="social"><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer-content">© 2019 <a href="/" rel="nofollow">Keep learn!</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/hexo-theme-noise">noise</a>.</div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>