<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>MySQL 主从复制 SHOW SLAVE STATUS 参数详解 | Peter's technology stack.</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Mysql主从复制/">Mysql主从复制</a></div><div class="post-time">2018-08-24</div></div></div><div class="container post-header"><h1>MySQL 主从复制 SHOW SLAVE STATUS 参数详解</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#示例"><span class="toc-number">1.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解释"><span class="toc-number">2.</span> <span class="toc-text">解释</span></a></li></ol></details></div><div class="container post-content"><h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; SHOW SLAVE STATUS\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">               Slave_IO_State: Waiting for master to send event</span><br><span class="line">                  Master_Host: 192.168.8.15</span><br><span class="line">                  Master_User: repluser</span><br><span class="line">                  Master_Port: 3306</span><br><span class="line">                Connect_Retry: 60</span><br><span class="line">              Master_Log_File: bin-log.000004</span><br><span class="line">          Read_Master_Log_Pos: 331</span><br><span class="line">               Relay_Log_File: relay-log.000005</span><br><span class="line">                Relay_Log_Pos: 613</span><br><span class="line">        Relay_Master_Log_File: bin-log.000004</span><br><span class="line">             Slave_IO_Running: Yes</span><br><span class="line">            Slave_SQL_Running: Yes</span><br><span class="line">              Replicate_Do_DB: </span><br><span class="line">          Replicate_Ignore_DB: </span><br><span class="line">           Replicate_Do_Table: </span><br><span class="line">       Replicate_Ignore_Table: </span><br><span class="line">      Replicate_Wild_Do_Table: </span><br><span class="line">  Replicate_Wild_Ignore_Table: </span><br><span class="line">                   Last_Errno: 0</span><br><span class="line">                   Last_Error: </span><br><span class="line">                 Skip_Counter: 0</span><br><span class="line">          Exec_Master_Log_Pos: 331</span><br><span class="line">              Relay_Log_Space: 1183</span><br><span class="line">              Until_Condition: None</span><br><span class="line">               Until_Log_File: </span><br><span class="line">                Until_Log_Pos: 0</span><br><span class="line">           Master_SSL_Allowed: No</span><br><span class="line">           Master_SSL_CA_File: </span><br><span class="line">           Master_SSL_CA_Path: </span><br><span class="line">              Master_SSL_Cert: </span><br><span class="line">            Master_SSL_Cipher: </span><br><span class="line">               Master_SSL_Key: </span><br><span class="line">        Seconds_Behind_Master: 0</span><br><span class="line">Master_SSL_Verify_Server_Cert: No</span><br><span class="line">                Last_IO_Errno: 0</span><br><span class="line">                Last_IO_Error: </span><br><span class="line">               Last_SQL_Errno: 0</span><br><span class="line">               Last_SQL_Error: </span><br><span class="line">  Replicate_Ignore_Server_Ids: </span><br><span class="line">             Master_Server_Id: 2</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<h3 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">参数具体含义解释：</span><br><span class="line"></span><br><span class="line">Slave_IO_State</span><br><span class="line"></span><br><span class="line">这个是指Slave连接到Master的状态，就是当前IO线程的状态，MySQL主从复制线程状态转变。</span><br><span class="line"></span><br><span class="line">Master_User</span><br><span class="line"></span><br><span class="line">这个是Master上面的一个用户，用来负责主从复制的用户 ，创建主从复制的时候建立的（具有reolication slave权限）。</span><br><span class="line"></span><br><span class="line">Master_Port</span><br><span class="line"></span><br><span class="line">Master服务器的端口，一般是3306。</span><br><span class="line"></span><br><span class="line">Connect_Retry</span><br><span class="line"></span><br><span class="line">连接尝试次数，使用change master时可以使用master-connect-retry选项指定当前值。</span><br><span class="line"></span><br><span class="line">Master_Log_File</span><br><span class="line"></span><br><span class="line">显示当前I/O线程当前正在读取的主服务器二进制日志文件的名称，上面显示是mysql-bin.010362。</span><br><span class="line"></span><br><span class="line">Read_Master_Log_Pos</span><br><span class="line"></span><br><span class="line">显示当前同步到主服务器上二进制日志的偏移量，I/O线程已经读取的位置，单位是字节，上述的示例显示当前同步到mysql-bin.010362的555176471偏移量位置，即已经同步了mysql-bin.010362这个二进制日志中529MB（555176471/1024/1024）的内容。</span><br><span class="line"></span><br><span class="line">Relay_Log_File</span><br><span class="line"></span><br><span class="line">显示Slave的SQL线程当前正在读取和执行的中继日志文件的名称。</span><br><span class="line"></span><br><span class="line">Relay_Log_Pos</span><br><span class="line"></span><br><span class="line">显示在当前的中继日志中，Slave的SQL线程已读取和执行的中继日志的偏移量。</span><br><span class="line"></span><br><span class="line">Relay_Master_Log_File</span><br><span class="line"></span><br><span class="line">显示Slave中继日志同步到Master的二进制日志文件，本示例中为mysql-bin.010327。</span><br><span class="line"></span><br><span class="line">Slave_IO_Running</span><br><span class="line"></span><br><span class="line">显示I/O线程是否被启动并成功地连接到主服务器上，成功为Yes，否则为No。</span><br><span class="line"></span><br><span class="line">Slave_SQL_Running</span><br><span class="line"></span><br><span class="line">显示SQL线程是否被启动，启动为Yes，否则为No。</span><br><span class="line"></span><br><span class="line">Replicate_Do_DB</span><br><span class="line"></span><br><span class="line">Replicate_Ignore_DB</span><br><span class="line"></span><br><span class="line">Replicate_Do_Table</span><br><span class="line"></span><br><span class="line">Replicate_Ignore_Table</span><br><span class="line"></span><br><span class="line">Replicate_Wild_Do_Table</span><br><span class="line"></span><br><span class="line">Replicate_Wild_Ignore_Table</span><br><span class="line"></span><br><span class="line">这些参数都是为了用来指明哪些库或者表在复制的时候不要同步到备库，但是这些参数用的时候要小心，因为当跨库使用的时候可能会出现问题。另外当仅忽略或仅允许多个库或表时，要多次使用忽略语句才可以。</span><br><span class="line"></span><br><span class="line">Last_Errno,Last_Error</span><br><span class="line"></span><br><span class="line">显示Slave的SQL线程读取日志参数的的错误数量和错误消息，错误数量为0并且消息为空字符串表示没有错误；如果Last_Error值不是空值，它也会在从属服务器的错误日志中作为消息显示。</span><br><span class="line"></span><br><span class="line">Skip_Counter</span><br><span class="line"></span><br><span class="line">显示最近被使用的用于SQL_SLAVE_SKIP_COUNTER的值，就是用于跳过Slave错误的。</span><br><span class="line"></span><br><span class="line">Exec_Master_Log_Pos</span><br><span class="line"></span><br><span class="line">表示SQL线程已经执行的Relay log相对于主库二进制日志偏移量的位置。</span><br><span class="line"></span><br><span class="line">Relay_Log_Space</span><br><span class="line"></span><br><span class="line">表示所有原有的中继日志结合起来的总大小，在START SLAVE语句的UNTIL子句中指定的值，Until_Condition具有以下值：Until_Condition、Until_Log_File、Until_Log_Pos。</span><br><span class="line"></span><br><span class="line">Until_Condition</span><br><span class="line"></span><br><span class="line">如果没有指定UNTIL子句，则没有值。如果从属服务器正在读取，直到达到主服务器的二进制日志的给定位置为止，则值为Master，如果从属服务器正在读取，直到达到其中继日志的给定位置为止，则值为Relay。</span><br><span class="line"></span><br><span class="line">Until_Log_File</span><br><span class="line"></span><br><span class="line">Until_Log_Pos</span><br><span class="line"></span><br><span class="line">Until_Log_File和Until_Log_Pos用于指示日志文件名和位置值，日志文件名和位置值定义了SQL线程在哪个点中止执行。</span><br><span class="line"></span><br><span class="line">Master_SSL_Allowed</span><br><span class="line"></span><br><span class="line">显示了从服务器是否使用SSL连接到主服务器。如果允许对主服务器进行SSL连接，则值为Yes；如果不允许对主服务器进行SSL连接，则值为No；如果允许SSL连接，但是从服务器没有让SSL支持被启用，则值为Ignored。</span><br><span class="line"></span><br><span class="line">Master_SSL_CA_File</span><br><span class="line"></span><br><span class="line">Master_SSL_CA_Path</span><br><span class="line"></span><br><span class="line">Master_SSL_Cert</span><br><span class="line"></span><br><span class="line">Master_SSL_Cipher</span><br><span class="line"></span><br><span class="line">Master_SSL_Key</span><br><span class="line"></span><br><span class="line">如果Slave使用SSL连接Master服务器，这里就会显示对应的证书和私钥信息。使用CHANGE MASTER与SSL相关的选项有：–master-ca,–master-capath,–master-cert,–master-cipher和–master-key等。</span><br><span class="line"></span><br><span class="line">Seconds_Behind_Master</span><br><span class="line"></span><br><span class="line">表示主从之间延迟的时间，单位是秒。就是SQL线程当前执行的binlog（实际上是relay log）中的timestamp和IO线程最新的timestamp的差值。</span><br><span class="line"></span><br><span class="line">实质上，此字段计算Slave SQL线程和Slave i/o线程之间的时间差 (以秒为单位)。如果主节点和从服务器之间的网络连接速度较快，则Slave i/o线程非常接近主服务器，因此此字段是对从SQL线程与主服务器进行比较的后的一个很好的近似值。如果网络很慢，这不是一个好的近似；从SQL线程可能经常被从i/o线程所捕获，因此Seconds_Behind_Master通常显示值为0，即使i/o线程比主服务器慢很多。换言之，此列仅适用于快速网络。</span><br><span class="line"></span><br><span class="line">Master_SSL_Verify_Server_Cert</span><br><span class="line"></span><br><span class="line">显示是否认证Master证书。</span><br><span class="line"></span><br><span class="line">Master_Server_Id</span><br><span class="line"></span><br><span class="line">显示主服务器的Server_id。</span><br><span class="line"></span><br><span class="line">Using_Gtid</span><br><span class="line"></span><br><span class="line">表示是否开启了基于Gtid的复制，开启为Yes，否则为No。</span><br><span class="line"></span><br><span class="line">Gtid_IO_Pos</span><br><span class="line"></span><br><span class="line">如果开启了基于Gtid的复制，这里会显示当前执行到的事物ID。</span><br></pre></td></tr></table></figure>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>