<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>腾讯蓝鲸CMDB | Keep learn!</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a><a class="sidebar-nav-item" href="/about">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/CMDB/">CMDB</a></div><div class="post-time">2018-05-04</div></div></div><div class="container post-header"><h1>腾讯蓝鲸CMDB</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装蓝鲸CMDB"><span class="toc-number">1.</span> <span class="toc-text">安装蓝鲸CMDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#环境"><span class="toc-number">1.1.</span> <span class="toc-text">环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装java"><span class="toc-number">1.2.</span> <span class="toc-text">安装java</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装zookeeper"><span class="toc-number">1.3.</span> <span class="toc-text">安装zookeeper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装redis"><span class="toc-number">1.4.</span> <span class="toc-text">安装redis</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装mongodb"><span class="toc-number">1.5.</span> <span class="toc-text">安装mongodb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库配置"><span class="toc-number">1.6.</span> <span class="toc-text">数据库配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#redis打开auth验证"><span class="toc-number">1.6.1.</span> <span class="toc-text">redis打开auth验证</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#在mongodb中创建数据库cmdb"><span class="toc-number">1.6.2.</span> <span class="toc-text">在mongodb中创建数据库cmdb</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#部署CMDB"><span class="toc-number">1.7.</span> <span class="toc-text">部署CMDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改mongodb配置文件"><span class="toc-number">1.8.</span> <span class="toc-text">修改mongodb配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动服务"><span class="toc-number">1.9.</span> <span class="toc-text">启动服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务启动之后初始化数据库"><span class="toc-number">1.10.</span> <span class="toc-text">服务启动之后初始化数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#访问测试"><span class="toc-number">1.11.</span> <span class="toc-text">访问测试</span></a></li></ol></li></ol></details></div><div class="container post-content"><center><img src="https://houhaiyun.github.io/img/images/telnet-lanjin-CMDB-2.png" title="蓝鲸社区版"></center>


<a id="more"></a>
<h2 id="安装蓝鲸CMDB"><a href="#安装蓝鲸CMDB" class="headerlink" title="安装蓝鲸CMDB"></a>安装蓝鲸CMDB</h2><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><table>
<thead>
<tr>
<th>服务</th>
<th>IP</th>
<th>系统版本</th>
<th>软件版本</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>Nginx</td>
<td>10.6.168.86/24</td>
<td>CentOS Linux release 7.3.1611 (Core)</td>
<td>openjdk 1.8 蓝鲸CMDB 4.0  zookeeper 3.4.12 mongodb 3.6</td>
<td>CMDB</td>
</tr>
</tbody>
</table>
<h3 id="安装java"><a href="#安装java" class="headerlink" title="安装java"></a>安装java</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode CMDB]# yum install -y java-1.8.0-openjdk-devel    # 安装1.8的devel包，这条命令会安装java-1.8.0、java-1.8.0-poenjdk-devel、java-1.8.0-openjdk-headless以及其他相关依赖</span><br></pre></td></tr></table></figure>
<h3 id="安装zookeeper"><a href="#安装zookeeper" class="headerlink" title="安装zookeeper"></a>安装zookeeper</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode CMDB]# wget https://mirrors.tuna.tsinghua.edu.cn/apache/zookeeper/zookeeper-3.4.12/zookeeper-3.4.12.tar.gz       # 下载</span><br><span class="line">[root@namenode CMDB]# tar xf zookeeper-3.4.12.tar.gz -C /opt/app/    # 解压</span><br><span class="line">[root@namenode CMDB]# cd /opt/app/zookeeper-3.4.12/</span><br><span class="line">[root@namenode zookeeper-3.4.12]# mkdir data</span><br><span class="line">[root@namenode zookeeper-3.4.12]# mkdir logs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@namenode zookeeper-3.4.12]# cat conf/zoo.cfg      # 添加配置文件，注意此配置文件默认是不存在的；</span><br><span class="line">tickTime=2000</span><br><span class="line">dataDir=/opt/app/zookeeper-3.4.12/data</span><br><span class="line">dataLogDir=/opt/app/zookeeper-3.4.12/logs</span><br><span class="line">clientPort=2181</span><br><span class="line"></span><br><span class="line">[root@namenode zookeeper-3.4.12]# ./bin/zkServer.sh start   # 启动zeookeeper；</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /opt/app/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br><span class="line">[root@namenode zookeeper-3.4.12]# ps -ef | grep zoo</span><br><span class="line">root      329785       1  3 17:07 pts/6    00:00:01 java -Dzookeeper.log.dir=. -Dzookeeper.root.logger=INFO,CONSOLE -cp /opt/app/zookeeper-3.4.12/bin/../build/classes:/opt/app/zookeeper-3.4.12/bin/../bu</span><br><span class="line">ild/lib/*.jar:/opt/app/zookeeper-3.4.12/bin/../lib/slf4j-log4j12-1.7.25.jar:/opt/app/zookeeper-3.4.12/bin/../lib/slf4j-api-1.7.25.jar:/opt/app/zookeeper-3.4.12/bin/../lib/netty-3.10.6.Final.jar:/opt/app/zookeeper-3.4.12/bin/../lib/log4j-1.2.17.jar:/opt/app/zookeeper-3.4.12/bin/../lib/jline-0.9.94.jar:/opt/app/zookeeper-3.4.12/bin/../lib/audience-annotations-0.5.0.jar:/opt/app/zookeeper-3.4.12/bin/../zookeeper-3.4.12.jar:/opt/app/zookeeper-3.4.12/bin/../src/java/lib/*.jar:/opt/app/zookeeper-3.4.12/bin/../conf: -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain /opt/app/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line"></span><br><span class="line">[root@namenode zookeeper-3.4.12]# ./bin/zkServer.sh stop    # 停止</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /opt/app/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Stopping zookeeper ... STOPPED</span><br><span class="line">[root@namenode zookeeper-3.4.12]# ps -ef | grep zook</span><br><span class="line">root      329892  327485  0 17:08 pts/6    00:00:00 grep --color=auto zook</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@namenode zookeeper-3.4.12]# ./bin/zkServer.sh restart     # 重启</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /opt/app/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /opt/app/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Stopping zookeeper ... no zookeeper to stop (could not find file /opt/app/zookeeper-3.4.12/data/zookeeper_server.pid)</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /opt/app/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Starting zookeeper ... STARTED</span><br><span class="line">[root@namenode zookeeper-3.4.12]# ps -ef | grep zook</span><br><span class="line">root      329943       1 10 17:08 pts/6    00:00:00 java -Dzookeeper.log.dir=. -Dzookeeper.root.logger=INFO,CONSOLE -cp /opt/app/zookeeper-3.4.12/bin/../build/classes:/opt/app/zookeeper-3.4.12/bin/../bu</span><br><span class="line">ild/lib/*.jar:/opt/app/zookeeper-3.4.12/bin/../lib/slf4j-log4j12-1.7.25.jar:/opt/app/zookeeper-3.4.12/bin/../lib/slf4j-api-1.7.25.jar:/opt/app/zookeeper-3.4.12/bin/../lib/netty-3.10.6.Final.jar:/opt/app/zookeeper-3.4.12/bin/../lib/log4j-1.2.17.jar:/opt/app/zookeeper-3.4.12/bin/../lib/jline-0.9.94.jar:/opt/app/zookeeper-3.4.12/bin/../lib/audience-annotations-0.5.0.jar:/opt/app/zookeeper-3.4.12/bin/../zookeeper-3.4.12.jar:/opt/app/zookeeper-3.4.12/bin/../src/java/lib/*.jar:/opt/app/zookeeper-3.4.12/bin/../conf: -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.local.only=false org.apache.zookeeper.server.quorum.QuorumPeerMain /opt/app/zookeeper-3.4.12/bin/../conf/zoo.cfgroot      329978  327485  0 17:08 pts/6    00:00:00 grep --color=auto zook</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@namenode zookeeper-3.4.12]# ./bin/zkServer.sh status      # 查看状态</span><br><span class="line">ZooKeeper JMX enabled by default</span><br><span class="line">Using config: /opt/app/zookeeper-3.4.12/bin/../conf/zoo.cfg</span><br><span class="line">Mode: standalone</span><br></pre></td></tr></table></figure>
<h3 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode app]# yum install -y redis</span><br><span class="line">[root@namenode app]# systemctl start redis</span><br><span class="line">[root@namenode app]# ps -ef | grep redis</span><br><span class="line">redis     330920       1  0 17:22 ?        00:00:00 /usr/bin/redis-server 127.0.0.1:6379</span><br><span class="line">root      330929  327485  0 17:22 pts/6    00:00:00 grep --color=auto redis</span><br></pre></td></tr></table></figure>
<h3 id="安装mongodb"><a href="#安装mongodb" class="headerlink" title="安装mongodb"></a>安装mongodb</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode app]# vim /etc/yum.repos.d/mongodb.repo      # 配置官网yum源</span><br><span class="line">[mongodb-org-3.6]</span><br><span class="line">name=MongoDB Repository</span><br><span class="line">baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc</span><br><span class="line"></span><br><span class="line">[root@namenode app]# yum install -y mongodb-org</span><br><span class="line">[root@namenode cmdb]# systemctl start mongod</span><br></pre></td></tr></table></figure>
<h3 id="数据库配置"><a href="#数据库配置" class="headerlink" title="数据库配置"></a>数据库配置</h3><h4 id="redis打开auth验证"><a href="#redis打开auth验证" class="headerlink" title="redis打开auth验证"></a>redis打开auth验证</h4><p>打开redis.conf，找到requirepass去掉前面的#后面改成你想要设置的密码<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode cmdb]# grep "^requirepass"  /etc/redis.conf</span><br><span class="line">requirepass cmdb</span><br><span class="line"></span><br><span class="line">[root@namenode cmdb]# systemctl restart redis   # 配置完成要重启redis，切记</span><br></pre></td></tr></table></figure></p>
<h4 id="在mongodb中创建数据库cmdb"><a href="#在mongodb中创建数据库cmdb" class="headerlink" title="在mongodb中创建数据库cmdb"></a>在mongodb中创建数据库cmdb</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode cmdb]# mongo 127.0.0.1       # 连接</span><br><span class="line">MongoDB shell version v3.6.4</span><br><span class="line">connecting to: mongodb://127.0.0.1:27017/test</span><br><span class="line">MongoDB server version: 3.6.4</span><br><span class="line">Welcome to the MongoDB shell.</span><br><span class="line">For interactive help, type "help".</span><br><span class="line">For more comprehensive documentation, see</span><br><span class="line">	http://docs.mongodb.org/</span><br><span class="line">Questions? Try the support group</span><br><span class="line">	http://groups.google.com/group/mongodb-user</span><br><span class="line">Server has startup warnings: </span><br><span class="line">2018-05-03T18:12:05.022+0800 I CONTROL  [initandlisten] </span><br><span class="line">2018-05-03T18:12:05.022+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.</span><br><span class="line">2018-05-03T18:12:05.022+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.</span><br><span class="line">2018-05-03T18:12:05.022+0800 I CONTROL  [initandlisten] </span><br><span class="line">2018-05-03T18:12:05.022+0800 I CONTROL  [initandlisten] </span><br><span class="line">2018-05-03T18:12:05.022+0800 I CONTROL  [initandlisten] ** WARNING: You are running on a NUMA machine.</span><br><span class="line">2018-05-03T18:12:05.022+0800 I CONTROL  [initandlisten] **          We suggest launching mongod like this to avoid performance problems:</span><br><span class="line">2018-05-03T18:12:05.022+0800 I CONTROL  [initandlisten] **              numactl --interleave=all mongod [other options]</span><br><span class="line">2018-05-03T18:12:05.023+0800 I CONTROL  [initandlisten] </span><br><span class="line">2018-05-03T18:12:05.023+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is 'always'.</span><br><span class="line">2018-05-03T18:12:05.023+0800 I CONTROL  [initandlisten] **        We suggest setting it to 'never'</span><br><span class="line">2018-05-03T18:12:05.023+0800 I CONTROL  [initandlisten] </span><br><span class="line">2018-05-03T18:12:05.023+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/defrag is 'always'.</span><br><span class="line">2018-05-03T18:12:05.023+0800 I CONTROL  [initandlisten] **        We suggest setting it to 'never'</span><br><span class="line">2018-05-03T18:12:05.023+0800 I CONTROL  [initandlisten] </span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> use cmdb      <span class="comment"># 创建cmdb数据库</span></span></span><br><span class="line">switched to db cmdb</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> db.createUser(&#123;user: <span class="string">"cc"</span>,<span class="built_in">pwd</span>: <span class="string">"cc"</span>,roles: [ &#123; role: <span class="string">"readWrite"</span>, db: <span class="string">"cmdb"</span> &#125; ]&#125;)    <span class="comment"># 为新创建的数据库设置用户名和密码</span></span></span><br><span class="line">Successfully added user: &#123;</span><br><span class="line">	"user" : "cc",</span><br><span class="line">	"roles" : [</span><br><span class="line">		&#123;</span><br><span class="line">			"role" : "readWrite",</span><br><span class="line">			"db" : "cmdb"</span><br><span class="line">		&#125;</span><br><span class="line">	]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="部署CMDB"><a href="#部署CMDB" class="headerlink" title="部署CMDB"></a>部署CMDB</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode CMDB]# wget http://bkopen-10032816.file.myqcloud.com/cmdb3/cmdb-3.0.6.tar.gz        # 下载</span><br><span class="line">[root@namenode CMDB]# tar xf cmdb-3.0.6.tar.gz -C /opt/app/</span><br><span class="line">[root@namenode CMDB]# cd /opt/app/cmdb/</span><br><span class="line"></span><br><span class="line">[root@namenode cmdb]# python init.py --discovery 127.0.0.1:2181 --database cmdb --redis_ip 127.0.0.1 --redis_port 6379 --redis_pass cmdb --mongo_ip 127.0.0.1 --mongo_port 27017 --mongo_user cc --mongo_p</span><br><span class="line">ass cc --blueking_cmdb_url http://127.0.0.1:8083 --listen_port 8083     # 生成配置文件</span><br></pre></td></tr></table></figure>
<h3 id="修改mongodb配置文件"><a href="#修改mongodb配置文件" class="headerlink" title="修改mongodb配置文件"></a>修改mongodb配置文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode cmdb]# vim cmdb_adminserver/configures/datacollection.conf</span><br><span class="line"></span><br><span class="line">    [mongodb]</span><br><span class="line">    host = 127.0.0.1</span><br><span class="line">    usr = cc</span><br><span class="line">    pwd = cc</span><br><span class="line">    database = cmdb</span><br><span class="line">    port = 27017</span><br><span class="line">    maxOpenConns = 3000</span><br><span class="line">    maxIdleConns = 1000</span><br><span class="line">    mechanism=SCRAM-SHA-1       # 如果mongodb版本大于3.6需要在配置文件添加此行；</span><br><span class="line"></span><br><span class="line">    [snap-redis]</span><br><span class="line">    host = 127.0.0.1:6379</span><br><span class="line">    usr = cc</span><br><span class="line">    pwd = cmdb</span><br><span class="line">    database = 0</span><br><span class="line">    chan = 3_snapshot</span><br><span class="line"></span><br><span class="line">    [redis]</span><br><span class="line">    host = 127.0.0.1:6379</span><br><span class="line">    usr = cc</span><br><span class="line">    pwd = cmdb</span><br><span class="line">    database = 0</span><br></pre></td></tr></table></figure>
<h3 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode cmdb]# ./start.sh </span><br><span class="line">starting: cmdb_adminserver</span><br><span class="line">starting: cmdb_apiserver</span><br><span class="line">starting: cmdb_auditcontroller</span><br><span class="line">starting: cmdb_datacollection</span><br><span class="line">starting: cmdb_eventserver</span><br><span class="line">starting: cmdb_hostcontroller</span><br><span class="line">starting: cmdb_hostserver</span><br><span class="line">starting: cmdb_objectcontroller</span><br><span class="line">starting: cmdb_proccontroller</span><br><span class="line">starting: cmdb_procserver</span><br><span class="line">starting: cmdb_toposerver</span><br><span class="line">starting: cmdb_webserver</span><br><span class="line">root      334229       1  5 18:23 pts/6    00:00:00 ./cmdb_adminserver --addrport=10.6.168.86:60004 --logtostderr=false --log-dir=./logs --v=0 --config=configures/migrate.conf</span><br><span class="line">root      334250       1  3 18:23 pts/6    00:00:00 ./cmdb_apiserver --addrport=10.6.168.86:8080 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334271       1  1 18:23 pts/6    00:00:00 ./cmdb_auditcontroller --addrport=10.6.168.86:50005 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334287       1  1 18:23 pts/6    00:00:00 ./cmdb_datacollection --addrport=10.6.168.86:60005 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334310       1  1 18:23 pts/6    00:00:00 ./cmdb_eventserver --addrport=10.6.168.86:60009 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334331       1  1 18:23 pts/6    00:00:00 ./cmdb_hostcontroller --addrport=10.6.168.86:50002 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334352       1  1 18:23 pts/6    00:00:00 ./cmdb_hostserver --addrport=10.6.168.86:60001 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334373       1  0 18:23 pts/6    00:00:00 ./cmdb_objectcontroller --addrport=10.6.168.86:50001 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334394       1  0 18:23 pts/6    00:00:00 ./cmdb_proccontroller --addrport=10.6.168.86:50003 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334414       1  0 18:23 pts/6    00:00:00 ./cmdb_procserver --addrport=10.6.168.86:60003 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334434       1  0 18:23 pts/6    00:00:00 ./cmdb_toposerver --addrport=10.6.168.86:60002 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">root      334455       1  0 18:23 pts/6    00:00:00 ./cmdb_webserver --addrport=10.6.168.86:8083 --logtostderr=false --log-dir=./logs --v=0 --regdiscv=127.0.0.1:2181</span><br><span class="line">process count should be: 12 , now: 12</span><br></pre></td></tr></table></figure>
<h3 id="服务启动之后初始化数据库"><a href="#服务启动之后初始化数据库" class="headerlink" title="服务启动之后初始化数据库"></a>服务启动之后初始化数据库</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@namenode cmdb]# bash init_db.sh </span><br><span class="line">&#123;"result":true,"bk_error_code":0,"bk_error_msg":"success","data":"migrate success"&#125;</span><br></pre></td></tr></table></figure>
<h3 id="访问测试"><a href="#访问测试" class="headerlink" title="访问测试"></a>访问测试</h3><center><img src="https://houhaiyun.github.io/img/images/telnet-lanjin-CMDB-1.gif" title="访问测试"></center>



</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>