<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>通过commit方式制作Docker镜像 | Keep learn!</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a><a class="sidebar-nav-item" href="/about">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Docker/">Docker</a></div><div class="post-time">2018-07-21</div></div></div><div class="container post-header"><h1>通过commit方式制作Docker镜像</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#镜像的生成途径"><span class="toc-number">1.</span> <span class="toc-text">镜像的生成途径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基于容器的制作"><span class="toc-number">2.</span> <span class="toc-text">基于容器的制作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#为刚刚制作的镜像打标签"><span class="toc-number">2.1.</span> <span class="toc-text">为刚刚制作的镜像打标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#登陆阿里云开发者平台"><span class="toc-number">2.2.</span> <span class="toc-text">登陆阿里云开发者平台</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#为新创建的镜像打第二个标签"><span class="toc-number">3.</span> <span class="toc-text">为新创建的镜像打第二个标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建新镜像并指定默认运行命令"><span class="toc-number">4.</span> <span class="toc-text">创建新镜像并指定默认运行命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#docker删除镜像"><span class="toc-number">5.</span> <span class="toc-text">docker删除镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#commit制作命令并指定默认运行命令"><span class="toc-number">6.</span> <span class="toc-text">commit制作命令并指定默认运行命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#镜像的导出"><span class="toc-number">7.</span> <span class="toc-text">镜像的导出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#导入镜像"><span class="toc-number">8.</span> <span class="toc-text">导入镜像</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看镜像历史"><span class="toc-number">9.</span> <span class="toc-text">查看镜像历史</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#显示容器状态"><span class="toc-number">10.</span> <span class="toc-text">显示容器状态</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#制作镜像并且打上标签"><span class="toc-number">11.</span> <span class="toc-text">制作镜像并且打上标签</span></a></li></ol></details></div><div class="container post-content"><h3 id="镜像的生成途径"><a href="#镜像的生成途径" class="headerlink" title="镜像的生成途径"></a>镜像的生成途径</h3><ol>
<li>Dockerfile</li>
<li>基于容器的制作</li>
<li>Docker Hub automated builds</li>
</ol>
<a id="more"></a>
<h3 id="基于容器的制作"><a href="#基于容器的制作" class="headerlink" title="基于容器的制作"></a>基于容器的制作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run --name b1 -it centos:latest bash       # 首先运行一个容器；</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker ps     # 容器已经运行；</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">cf95941eacaa        centos:latest       &quot;bash&quot;              2 minutes ago       Up 2 minutes                            b1</span><br><span class="line">[root@centos7 ~]# docker commit -a &quot;houhaiyun &lt;hou_haiyun@weitac.com&gt;&quot; -p -m &quot;web site resource&quot; b1        # 制作镜像，-a指定作者，-p指定在制作镜像时暂停容器的所有操作，-m指定镜像描述信息，b1是容器名称；</span><br><span class="line">sha256:339a47fcd8315e35e8412c888137140db592b10265603afee1889e1a7c2f959e</span><br><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              339a47fcd831        11 seconds ago      204MB</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        8 weeks ago         1.13MB</span><br></pre></td></tr></table></figure>
<h4 id="为刚刚制作的镜像打标签"><a href="#为刚刚制作的镜像打标签" class="headerlink" title="为刚刚制作的镜像打标签"></a>为刚刚制作的镜像打标签</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker images         # 列出所有镜像；</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              339a47fcd831        11 seconds ago      204MB</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        8 weeks ago         1.13MB</span><br><span class="line">[root@centos7 ~]# docker tag 339a47fcd831 registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc:web0.1       # 339a47fcd831为镜像ID，registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc:web0.1为仓库名:标签；</span><br><span class="line">[root@centos7 ~]# docker images     # 已经有仓库和标签；</span><br><span class="line">REPOSITORY                                               TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc   web0.1              339a47fcd831        7 minutes ago       204MB</span><br><span class="line">centos                                                   latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox                                                  1.27.2              6ad733544a63        8 weeks ago         1.13MB</span><br></pre></td></tr></table></figure>
<h4 id="登陆阿里云开发者平台"><a href="#登陆阿里云开发者平台" class="headerlink" title="登陆阿里云开发者平台"></a>登陆阿里云开发者平台</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker login dev.aliyun.com</span><br><span class="line">Username: 13718403393</span><br><span class="line">Password: </span><br><span class="line">Login Succeeded</span><br></pre></td></tr></table></figure>
<h3 id="为新创建的镜像打第二个标签"><a href="#为新创建的镜像打第二个标签" class="headerlink" title="为新创建的镜像打第二个标签"></a>为新创建的镜像打第二个标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker images     # 列出所有镜像；</span><br><span class="line">REPOSITORY                                               TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc   web0.1              339a47fcd831        15 minutes ago      204MB</span><br><span class="line">centos                                                   latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox                                                  1.27.2              6ad733544a63        8 weeks ago         1.13MB</span><br><span class="line">[root@centos7 ~]# docker tag 339a47fcd831 websrv:0.1        # 打标签；</span><br><span class="line">[root@centos7 ~]# docker images     # 已经有标签；</span><br><span class="line">REPOSITORY                                               TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">websrv                                                   0.1                 339a47fcd831        17 minutes ago      204MB</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc   web0.1              339a47fcd831        17 minutes ago      204MB</span><br><span class="line">centos                                                   latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox                                                  1.27.2              6ad733544a63        8 weeks ago         1.13MB</span><br></pre></td></tr></table></figure>
<h3 id="创建新镜像并指定默认运行命令"><a href="#创建新镜像并指定默认运行命令" class="headerlink" title="创建新镜像并指定默认运行命令"></a>创建新镜像并指定默认运行命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker commit -a &quot;houhaiyun &lt;hou_haiyun@weitac.com&gt;&quot; -p -m &quot;web server&quot; -c &apos;CMD [&quot;/usr/sbin/httpd&quot;,&quot;-f&quot;,&quot;-h&quot;,&quot;/web/html&quot;]&apos; b1     # 创建进行-c表示指定默认运行命令；</span><br><span class="line">sha256:5eb3758631b82331b0ea8f5d12bdb8d449df61579ecb69df5b2f55eba78a3fb5</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker images     # 显示所有镜像；</span><br><span class="line">REPOSITORY                                               TAG                 IMAGE ID            CREATED              SIZE</span><br><span class="line">&lt;none&gt;                                                   &lt;none&gt;              5eb3758631b8        About a minute ago   323MB</span><br><span class="line">web                                                      0.1                 273281a7964b        10 minutes ago       323MB</span><br><span class="line">websrv                                                   0.1                 339a47fcd831        11 hours ago         204MB</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc   web0.1              339a47fcd831        11 hours ago         204MB</span><br><span class="line">centos                                                   latest              3fa822599e10        4 weeks ago          204MB</span><br><span class="line">busybox                                                  1.27.2              6ad733544a63        8 weeks ago          1.13MB</span><br><span class="line">[root@centos7 ~]# docker tag 5eb3758631b8 web:0.2       # 为新创建的镜像打标签；</span><br><span class="line">[root@centos7 ~]# docker images             # 显示所有镜像；</span><br><span class="line">REPOSITORY                                               TAG                 IMAGE ID            CREATED              SIZE</span><br><span class="line">web                                                      0.2                 5eb3758631b8        About a minute ago   323MB</span><br><span class="line">web                                                      0.1                 273281a7964b        11 minutes ago       323MB</span><br><span class="line">websrv                                                   0.1                 339a47fcd831        11 hours ago         204MB</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc   web0.1              339a47fcd831        11 hours ago         204MB</span><br><span class="line">centos                                                   latest              3fa822599e10        4 weeks ago          204MB</span><br><span class="line">busybox                                                  1.27.2              6ad733544a63        8 weeks ago          1.13MB</span><br></pre></td></tr></table></figure>
<h3 id="docker删除镜像"><a href="#docker删除镜像" class="headerlink" title="docker删除镜像"></a>docker删除镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY                                               TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc   web0.1              339a47fcd831        23 hours ago        204MB</span><br><span class="line">centos                                                   latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox                                                  1.27.2              6ad733544a63        2 months ago        1.13MB</span><br><span class="line">[root@centos7 ~]# docker rmi 339a47fcd831</span><br><span class="line">Untagged: registry.cn-hangzhou.aliyuncs.com/houhaiyun/ihaiyun.cc:web0.1</span><br><span class="line">Deleted: sha256:339a47fcd8315e35e8412c888137140db592b10265603afee1889e1a7c2f959e</span><br><span class="line">Deleted: sha256:79923bbbcf9f2cb45ba7ae035553b7e67026853cd5808e03a4ff35402bd3a7fa</span><br><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        2 months ago        1.13MB</span><br></pre></td></tr></table></figure>
<h3 id="commit制作命令并指定默认运行命令"><a href="#commit制作命令并指定默认运行命令" class="headerlink" title="commit制作命令并指定默认运行命令"></a>commit制作命令并指定默认运行命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 docker commit -a &quot;houhaiyun &lt;hou_haiyun@weitac.com&gt;&quot; -p -m &quot;web server&quot; -c &apos;CMD [&quot;/bin/httpd&quot;,&quot;-f&quot;]&apos; bbox1</span><br><span class="line">sha256:87aadc5b53c75e1ff9cefa62541eec46534c7d490814ff0d6285d2e8f291f8dd</span><br><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">&lt;none&gt;              &lt;none&gt;              87aadc5b53c7        7 seconds ago       1.13MB</span><br><span class="line">web                 0.1                 fcd0885091c8        About an hour ago   1.13MB</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        2 months ago        1.13MB</span><br><span class="line">[root@centos7 ~]# docker tag 87aadc5b53c7 web:0.2</span><br><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">web                 0.2                 87aadc5b53c7        22 seconds ago      1.13MB</span><br><span class="line">web                 0.1                 fcd0885091c8        About an hour ago   1.13MB</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        2 months ago        1.13MB</span><br><span class="line">[root@centos7 ~]# docker run --name web2 -d web:0.2 </span><br><span class="line">d8e57eea043d27c65d7c3f8768bfed272fc4efb935cb86a475b55e51a77f7098</span><br><span class="line">[root@centos7 ~]# docker ps </span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">d8e57eea043d        web:0.2             &quot;/bin/httpd -f&quot;     3 seconds ago       Up 2 seconds                            web2</span><br><span class="line">83430a68dae7        busybox:1.27.2      &quot;sh&quot;                3 minutes ago       Up 3 minutes                            bbox1</span><br></pre></td></tr></table></figure>
<h3 id="镜像的导出"><a href="#镜像的导出" class="headerlink" title="镜像的导出"></a>镜像的导出</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker images </span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">web                 0.2                 87aadc5b53c7        24 minutes ago      1.13MB</span><br><span class="line">web                 0.1                 fcd0885091c8        2 hours ago         1.13MB</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        2 months ago        1.13MB</span><br><span class="line">[root@centos7 ~]# docker save -o /root/web:0.2.tar web:0.2      # 导出镜像，-o指定导出的位置；</span><br><span class="line">[root@centos7 ~]# ll -h </span><br><span class="line">total 1.3M</span><br><span class="line">-rw------- 1 root root 1.3M Jan  3 11:07 web:0.2.tar</span><br></pre></td></tr></table></figure>
<h3 id="导入镜像"><a href="#导入镜像" class="headerlink" title="导入镜像"></a>导入镜像</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# scp ./web\:0.2.tar  192.168.8.12:     # 将镜像复制到192.168.8.12这台主机；</span><br><span class="line">The authenticity of host &apos;192.168.8.12 (192.168.8.12)&apos; can&apos;t be established.</span><br><span class="line">ECDSA key fingerprint is b2:9b:a5:92:1a:0a:1f:ee:0d:e4:b8:15:03<img class="github-emoji" title="de" alt="de" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e9-1f1ea.png?v8" height="20" width="20">13:b4.</span><br><span class="line">Are you sure you want to continue connecting (yes/no)? yes</span><br><span class="line">Warning: Permanently added &apos;192.168.8.12&apos; (ECDSA) to the list of known hosts.</span><br><span class="line">root@192.168.8.12&apos;s password: </span><br><span class="line">web:0.2.tar                                                                                                                        100% 1324KB   1.3MB/s   00:00    </span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">docker.io/centos    latest              3fa822599e10        4 weeks ago         203.5 MB</span><br><span class="line">docker.io/busybox   1.27.2              6ad733544a63        8 weeks ago         1.129 MB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker load  -i web\:0.2.tar      # 导入镜像；</span><br><span class="line">d0e09d960c2a: Loading layer [==================================================&gt;] 4.608 kB/4.608 kB</span><br><span class="line">Loaded image: web:0.2 layer [=====&gt;                                             ]    512 B/4.608 kB</span><br><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">web                 0.2                 87aadc5b53c7        36 minutes ago      1.129 MB</span><br><span class="line">docker.io/centos    latest              3fa822599e10        4 weeks ago         203.5 MB</span><br><span class="line">docker.io/busybox   1.27.2              6ad733544a63        8 weeks ago         1.129 MB</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker run -d --name web web:0.2      # 运行容器；</span><br><span class="line">61e6335a5d3fd325a8158da027c8fd043340ff9ef2c73909f58978e04449b943</span><br><span class="line">[root@centos7 ~]# docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">61e6335a5d3f        web:0.2             &quot;/bin/httpd -f&quot;     3 seconds ago       Up 2 seconds                            web</span><br></pre></td></tr></table></figure>
<h3 id="查看镜像历史"><a href="#查看镜像历史" class="headerlink" title="查看镜像历史"></a>查看镜像历史</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">web                 0.2                 87aadc5b53c7        44 minutes ago      1.13MB</span><br><span class="line">web                 0.1                 fcd0885091c8        2 hours ago         1.13MB</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        2 months ago        1.13MB</span><br><span class="line">[root@centos7 ~]# docker history web:0.2 </span><br><span class="line">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT</span><br><span class="line">87aadc5b53c7        44 minutes ago      sh                                              133B                web server</span><br><span class="line">6ad733544a63        2 months ago        /bin/sh -c #(nop)  CMD [&quot;sh&quot;]                   0B                  </span><br><span class="line">&lt;missing&gt;           2 months ago        /bin/sh -c #(nop) ADD file:264af0c48e23e8b8f…   1.13MB</span><br></pre></td></tr></table></figure>
<h3 id="显示容器状态"><a href="#显示容器状态" class="headerlink" title="显示容器状态"></a>显示容器状态</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker stats web2     # 显示web2的状态；</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker stats -a       # 显示所有容器的状态；</span><br></pre></td></tr></table></figure>
<h3 id="制作镜像并且打上标签"><a href="#制作镜像并且打上标签" class="headerlink" title="制作镜像并且打上标签"></a>制作镜像并且打上标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker images </span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">web                 0.2                 87aadc5b53c7        9 hours ago         1.13MB</span><br><span class="line">web                 0.1                 fcd0885091c8        11 hours ago        1.13MB</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        2 months ago        1.13MB</span><br><span class="line">[root@centos7 ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">98490a0fa139        busybox:1.27.2      &quot;sh&quot;                13 minutes ago      Up 13 minutes                           b1</span><br><span class="line">[root@centos7 ~]# docker commit -a &quot;houhaiyun &lt;hou_haiyun@weitac.com&gt;&quot; -m &quot;test page&quot; -p b1 testbox:v0.1</span><br><span class="line">sha256:da2444a15176b3fc764d5093b19d1a40ab2d7c2ccc193a55f1ab62aa727bf4f3</span><br><span class="line">[root@centos7 ~]# docker images </span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">testbox             v0.1                da2444a15176        7 seconds ago       1.13MB</span><br><span class="line">web                 0.2                 87aadc5b53c7        9 hours ago         1.13MB</span><br><span class="line">web                 0.1                 fcd0885091c8        11 hours ago        1.13MB</span><br><span class="line">centos              latest              3fa822599e10        4 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        2 months ago        1.13MB</span><br></pre></td></tr></table></figure>
</div></div><div class="post-main post-comment"><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'keeplearn';
var disqus_identifier = '2018/07/21/Docker-commit-image/';
var disqus_title = '通过commit方式制作Docker镜像';
var disqus_url = 'https://keeplearn.vip/2018/07/21/Docker-commit-image/';
(function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">Blog comments powered by <span class="logo-disqus">Disqus</span></a></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>