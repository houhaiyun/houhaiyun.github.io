<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>Docker网络管理 | Keep learn!</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a><a class="sidebar-nav-item" href="/about">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Docker/">Docker</a></div><div class="post-time">2018-07-21</div></div></div><div class="container post-header"><h1>Docker网络管理</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#列出当前主机上的docker网络"><span class="toc-number">1.</span> <span class="toc-text">列出当前主机上的docker网络</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#列出当前主机上的docker网络且显示完整网络ID"><span class="toc-number">1.1.</span> <span class="toc-text">列出当前主机上的docker网络且显示完整网络ID</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用none网络模式"><span class="toc-number">2.</span> <span class="toc-text">使用none网络模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用host网络模式"><span class="toc-number">3.</span> <span class="toc-text">使用host网络模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用bridge网络模式并指定主机名"><span class="toc-number">4.</span> <span class="toc-text">使用bridge网络模式并指定主机名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用bridge网络模式并指定单个或多个DNS地址"><span class="toc-number">5.</span> <span class="toc-text">使用bridge网络模式并指定单个或多个DNS地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用bridge网络模式并指定hosts文件内容"><span class="toc-number">6.</span> <span class="toc-text">使用bridge网络模式并指定hosts文件内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用bridge网络模式将容器内指定端口映射到宿主机的随机端口"><span class="toc-number">7.</span> <span class="toc-text">使用bridge网络模式将容器内指定端口映射到宿主机的随机端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用bridge网络模式将容器内指定端口映射到宿主机的指定端口"><span class="toc-number">8.</span> <span class="toc-text">使用bridge网络模式将容器内指定端口映射到宿主机的指定端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用bridge网络模式将容器内指定IP随机端口-映射-到宿主机的指定端口"><span class="toc-number">9.</span> <span class="toc-text">使用bridge网络模式将容器内指定IP随机端口 映射 到宿主机的指定端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用bridge网络模式将容器内指定IP指定端口-映射-到宿主机的指定端口"><span class="toc-number">10.</span> <span class="toc-text">使用bridge网络模式将容器内指定IP指定端口 映射 到宿主机的指定端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#联盟式容器"><span class="toc-number">11.</span> <span class="toc-text">联盟式容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建桥"><span class="toc-number">12.</span> <span class="toc-text">创建桥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建本地桥"><span class="toc-number">12.1.</span> <span class="toc-text">创建本地桥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将容器关联之已有网络桥"><span class="toc-number">13.</span> <span class="toc-text">将容器关联之已有网络桥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除网桥"><span class="toc-number">14.</span> <span class="toc-text">删除网桥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改docker0的属性信息"><span class="toc-number">15.</span> <span class="toc-text">修改docker0的属性信息</span></a></li></ol></details></div><div class="container post-content"><h3 id="列出当前主机上的docker网络"><a href="#列出当前主机上的docker网络" class="headerlink" title="列出当前主机上的docker网络"></a>列出当前主机上的docker网络</h3><a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker network  ls</span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">3c295a6fa80b        bridge              bridge              local</span><br><span class="line">89f4fd8f26e7        host                host                local</span><br><span class="line">0a3b15434b1e        none                null                local</span><br></pre></td></tr></table></figure>
<h4 id="列出当前主机上的docker网络且显示完整网络ID"><a href="#列出当前主机上的docker网络且显示完整网络ID" class="headerlink" title="列出当前主机上的docker网络且显示完整网络ID"></a>列出当前主机上的docker网络且显示完整网络ID</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker network ls --no-trunc </span><br><span class="line">NETWORK ID                                                         NAME                DRIVER              SCOPE</span><br><span class="line">3c295a6fa80b0ba848b6590477ed76c34b71c660cbf133f3e4947c205eb125a9   bridge              bridge              local</span><br><span class="line">89f4fd8f26e7cc79a1ddfe5f935150393d45e2f70ec49b232d361aab78f2cd6f   host                host                local</span><br><span class="line">0a3b15434b1e488c337c69ca0c3b1f524b9137ed33d2e978c4c9d5c83087e015   none                null                local</span><br></pre></td></tr></table></figure>
<h3 id="使用none网络模式"><a href="#使用none网络模式" class="headerlink" title="使用none网络模式"></a>使用none网络模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">testbox             v0.1                da2444a15176        19 hours ago        1.13MB</span><br><span class="line">web                 0.2                 87aadc5b53c7        28 hours ago        1.13MB</span><br><span class="line">web                 0.1                 fcd0885091c8        30 hours ago        1.13MB</span><br><span class="line">centos              latest              3fa822599e10        5 weeks ago         204MB</span><br><span class="line">busybox             1.27.2              6ad733544a63        2 months ago        1.13MB</span><br><span class="line">[root@centos7 ~]# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br><span class="line">[root@centos7 ~]# docker run -it --name none1 --network none --rm busybox:1.27.2      # 运行容器指定网络模式为none；</span><br><span class="line">/ # ifconfig -a</span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">          RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1 </span><br><span class="line">          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">/ #</span><br></pre></td></tr></table></figure>
<h3 id="使用host网络模式"><a href="#使用host网络模式" class="headerlink" title="使用host网络模式"></a>使用host网络模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run -it --name host1 --network host --rm busybox:1.27.2      # 运行容器指定网络模式为host；</span><br><span class="line">/ # ifconfig -a</span><br><span class="line">docker0   Link encap:Ethernet  HWaddr 02:42:0A:55:E6:89  </span><br><span class="line">          inet addr:172.17.0.1  Bcast:172.17.255.255  Mask:255.255.0.0</span><br><span class="line">          UP BROADCAST MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:0 </span><br><span class="line">          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">ens33     Link encap:Ethernet  HWaddr 00:0C:29:E3:30:CA  </span><br><span class="line">          inet addr:192.168.182.133  Bcast:192.168.182.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fee3:30ca/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:7929 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:495 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:518271 (506.1 KiB)  TX bytes:46394 (45.3 KiB)</span><br><span class="line"></span><br><span class="line">ens34     Link encap:Ethernet  HWaddr 00:0C:29:E3:30:D4  </span><br><span class="line">          inet addr:192.168.8.17  Bcast:192.168.8.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fee3:30d4/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:1658 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:1147 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000 </span><br><span class="line">          RX bytes:162610 (158.7 KiB)  TX bytes:112014 (109.3 KiB)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          inet6 addr: ::1/128 Scope:Host</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">          RX packets:80 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:80 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1 </span><br><span class="line">          RX bytes:6960 (6.7 KiB)  TX bytes:6960 (6.7 KiB)</span><br><span class="line"></span><br><span class="line">/ #</span><br></pre></td></tr></table></figure>
<h3 id="使用bridge网络模式并指定主机名"><a href="#使用bridge网络模式并指定主机名" class="headerlink" title="使用bridge网络模式并指定主机名"></a>使用bridge网络模式并指定主机名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run -it --name bridge --rm --hostname www.ihaiyun.cc busybox:1.27.2 hostname</span><br><span class="line">www.ihaiyun.cc</span><br></pre></td></tr></table></figure>
<h3 id="使用bridge网络模式并指定单个或多个DNS地址"><a href="#使用bridge网络模式并指定单个或多个DNS地址" class="headerlink" title="使用bridge网络模式并指定单个或多个DNS地址"></a>使用bridge网络模式并指定单个或多个DNS地址</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run -it --name bridge --rm --dns 8.8.8.8 busybox:1.27.2 cat /etc/resolv.conf     # 指定单个DNS；</span><br><span class="line">search localdomain 3.haiyun.com</span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker run -it --name bridge --rm --network bridge --dns 8.8.8.8 --dns 114.114.114.114 busybox:1.27.2 cat /etc/resolv.conf </span><br><span class="line">search localdomain 3.haiyun.com     # 指定多个DNS；</span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 114.114.114.114</span><br></pre></td></tr></table></figure>
<h3 id="使用bridge网络模式并指定hosts文件内容"><a href="#使用bridge网络模式并指定hosts文件内容" class="headerlink" title="使用bridge网络模式并指定hosts文件内容"></a>使用bridge网络模式并指定hosts文件内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run -it --name bridge --network bridge --rm --add-host www.ihaiyun.cc:192.168.8.8 busybox:1.27.2 cat /etc/hosts</span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">::1	localhost ip6-localhost ip6-loopback</span><br><span class="line">fe00::0	ip6-localnet</span><br><span class="line">ff00::0	ip6-mcastprefix</span><br><span class="line">ff02::1	ip6-allnodes</span><br><span class="line">ff02::2	ip6-allrouters</span><br><span class="line">192.168.8.8	www.ihaiyun.cc</span><br><span class="line">172.17.0.2	cb249f6b5173</span><br><span class="line"></span><br><span class="line"># 也可以添加多条：</span><br><span class="line">[root@centos7 ~]# docker run -it --name bridge --network bridge --rm --add-host www.test.com:1.1.1.1 --add-host www.test2.com:2.2.2.2 busybox:1.27.2 cat /etc/hosts</span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">::1	localhost ip6-localhost ip6-loopback</span><br><span class="line">fe00::0	ip6-localnet</span><br><span class="line">ff00::0	ip6-mcastprefix</span><br><span class="line">ff02::1	ip6-allnodes</span><br><span class="line">ff02::2	ip6-allrouters</span><br><span class="line">1.1.1.1	www.test.com</span><br><span class="line">2.2.2.2	www.test2.com</span><br><span class="line">172.17.0.2	74cd24b35d4f</span><br></pre></td></tr></table></figure>
<h3 id="使用bridge网络模式将容器内指定端口映射到宿主机的随机端口"><a href="#使用bridge网络模式将容器内指定端口映射到宿主机的随机端口" class="headerlink" title="使用bridge网络模式将容器内指定端口映射到宿主机的随机端口"></a>使用bridge网络模式将容器内指定端口映射到宿主机的随机端口</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# ls /docker/data/volumes/b1/       </span><br><span class="line">test3  test.txt  tset2</span><br><span class="line">[root@centos7 ~]# echo &quot;tset Page&quot; &gt; /docker/data/volumes/b1/index.html     # 创建网站默认文件；</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker run -itd --name bridge --network bridge -v /docker/data/volumes/b1/:/data -p 80 busybox:1.27.2 httpd -f -h /data       # 运行容器，指定容器内的端口为80；</span><br><span class="line">4b8d1c40952110ae12136562e11fd7923df49ab8423923cec4b056136f1b468d</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker ps     # 查看当前运行的容器；</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND               CREATED             STATUS              PORTS                   NAMES</span><br><span class="line">4b8d1c409521        busybox:1.27.2      &quot;httpd -f -h /data&quot;   12 seconds ago      Up 12 seconds       0.0.0.0:32768-&gt;80/tcp   bridge</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker port bridge        # 查看容器bridge的端口映射，映射的本地端口为32768；</span><br><span class="line">80/tcp -&gt; 0.0.0.0:32768</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# curl http://192.168.8.17:32768        # 访问测试ok；</span><br><span class="line">tset Page</span><br></pre></td></tr></table></figure>
<h3 id="使用bridge网络模式将容器内指定端口映射到宿主机的指定端口"><a href="#使用bridge网络模式将容器内指定端口映射到宿主机的指定端口" class="headerlink" title="使用bridge网络模式将容器内指定端口映射到宿主机的指定端口"></a>使用bridge网络模式将容器内指定端口映射到宿主机的指定端口</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run -itd --name bridge --network bridge -v /docker/data/volumes/b1/:/data -p 80:80 busybox:1.27.2 httpd -f -h /data    # -p 80:80代表第一个80代表宿主机端口，第二个80代表容器端口；</span><br><span class="line">680b54f241a367f28f1a4ddc96a7c11e463449d0e82b8065170b074e23c8c5b5</span><br><span class="line">[root@centos7 ~]# docker port bridge    </span><br><span class="line">80/tcp -&gt; 0.0.0.0:80</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# curl 192.168.8.17         # 访问测试ok；</span><br><span class="line">tset Page</span><br></pre></td></tr></table></figure>
<h3 id="使用bridge网络模式将容器内指定IP随机端口-映射-到宿主机的指定端口"><a href="#使用bridge网络模式将容器内指定IP随机端口-映射-到宿主机的指定端口" class="headerlink" title="使用bridge网络模式将容器内指定IP随机端口 映射 到宿主机的指定端口"></a>使用bridge网络模式将容器内指定IP随机端口 映射 到宿主机的指定端口</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run -itd --name bridge -v /docker/data/volumes/b1/:/data -p 192.168.8.17::80 busybox:1.27.2 httpd -f -h /data     # 指定IP为192.168.8.17的随机端口映射到80端口；</span><br><span class="line">62a19dbea47f76b7afcbb917c3769f0d92f699897afa86b16605343dabc94800</span><br><span class="line">[root@centos7 ~]# docker port bridge    </span><br><span class="line">80/tcp -&gt; 192.168.8.17:32768</span><br><span class="line">[root@centos7 ~]# hostname -I </span><br><span class="line">192.168.182.133 192.168.8.17 172.17.0.1 </span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# curl 192.168.8.17:32768       # 访问测试IP192.168.8.17，ok；</span><br><span class="line">tset Page</span><br><span class="line">[root@centos7 ~]# curl 192.168.182.133:32768    # 192.168.182.133就不行；</span><br><span class="line">curl: (7) Failed connect to 192.168.182.133:32768; Connection refused</span><br></pre></td></tr></table></figure>
<h3 id="使用bridge网络模式将容器内指定IP指定端口-映射-到宿主机的指定端口"><a href="#使用bridge网络模式将容器内指定IP指定端口-映射-到宿主机的指定端口" class="headerlink" title="使用bridge网络模式将容器内指定IP指定端口 映射 到宿主机的指定端口"></a>使用bridge网络模式将容器内指定IP指定端口 映射 到宿主机的指定端口</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run -itd --name bridge -v /docker/data/volumes/b1/:/data -p 192.168.8.17:80:80 busybox:1.27.2 httpd -f -h /data     # 指定192.168.8.17:80来访问容器bridge的80端口；</span><br><span class="line">4e5014fd3b472a3746db7d6b10a8acb90012ee2078db64d9722aeb63b9d9dcdd</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# docker port bridge </span><br><span class="line">80/tcp -&gt; 192.168.8.17:80</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# curl 192.168.8.17</span><br><span class="line">tset Page</span><br><span class="line">[root@centos7 ~]# hostname -I </span><br><span class="line">192.168.182.133 192.168.8.17 172.17.0.1 </span><br><span class="line">[root@centos7 ~]# curl 192.168.182.133</span><br><span class="line">curl: (7) Failed connect to 192.168.182.133:80; Connection refused</span><br></pre></td></tr></table></figure>
<h3 id="联盟式容器"><a href="#联盟式容器" class="headerlink" title="联盟式容器"></a>联盟式容器</h3><p>联盟式容器是指使用某个已经存在容器的网络接口的容器，接口被联盟内的各容器共享使用；因此，联盟式容器彼此之间完全无隔离。</p>
<p>联盟式容器彼此间虽然共享同一个网络名称空间，但其它名称空间如User、Mount等还是隔离的。</p>
<p>联盟式容器彼此间存在端口冲突的可能性，因此，通常只会在多个容器上的程序需要程序loopback接口通信、或对某已存在的容器的网络属性进行监控时才使用此种模式的网络模型。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"># 创建第一个容器；</span><br><span class="line">[root@centos7 ~]# docker run -it --name con --rm -p 2222 busybox:1.27.2 </span><br><span class="line">WARNING: IPv4 forwarding is disabled. Networking will not work.</span><br><span class="line">/ # ifconfig </span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:02  </span><br><span class="line">          inet addr:172.17.0.2  Bcast:172.17.255.255  Mask:255.255.0.0</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:7 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:0 </span><br><span class="line">          RX bytes:578 (578.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">          RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1 </span><br><span class="line">          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">/ # cat /etc/hosts</span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">::1	localhost ip6-localhost ip6-loopback</span><br><span class="line">fe00::0	ip6-localnet</span><br><span class="line">ff00::0	ip6-mcastprefix</span><br><span class="line">ff02::1	ip6-allnodes</span><br><span class="line">ff02::2	ip6-allrouters</span><br><span class="line">172.17.0.2	9fa18846d19f</span><br><span class="line">/ # cat /etc/resolv.conf </span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">search 3.haiyun.com</span><br><span class="line"></span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 8.8.4.4</span><br><span class="line">/ # </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 运行第二个容器，第二个容器和第一个容器内的网络和hosts和DNS都是一摸一样的；</span><br><span class="line">[root@centos7 ~]# docker run  -it --network container:con --name con2 busybox:1.27.2 </span><br><span class="line">WARNING: IPv4 forwarding is disabled. Networking will not work.</span><br><span class="line">/ # ifconfig </span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:02  </span><br><span class="line">          inet addr:172.17.0.2  Bcast:172.17.255.255  Mask:255.255.0.0</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:8 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:0 </span><br><span class="line">          RX bytes:648 (648.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">          RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1 </span><br><span class="line">          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">/ # cat /etc/hosts </span><br><span class="line">127.0.0.1	localhost</span><br><span class="line">::1	localhost ip6-localhost ip6-loopback</span><br><span class="line">fe00::0	ip6-localnet</span><br><span class="line">ff00::0	ip6-mcastprefix</span><br><span class="line">ff02::1	ip6-allnodes</span><br><span class="line">ff02::2	ip6-allrouters</span><br><span class="line">172.17.0.2	9fa18846d19f</span><br><span class="line">/ # cat /etc/resolv.conf </span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">search 3.haiyun.com</span><br><span class="line"></span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 8.8.4.4</span><br></pre></td></tr></table></figure></p>
<h3 id="创建桥"><a href="#创建桥" class="headerlink" title="创建桥"></a>创建桥</h3><h4 id="创建本地桥"><a href="#创建本地桥" class="headerlink" title="创建本地桥"></a>创建本地桥</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker network create --subnet 10.10.0.0/16 --ip-range 10.10.10.0/24 --gateway 10.10.10.1 br0      # --subnet：CIDR格式的子网代表一个网段，--ip-range：从子范围分配容器IP；--gateway：	主网段的网关；</span><br><span class="line">ffbef008c8811296a324d6d1c31ebba71b99511bf7f7442339433bf77d06e8da</span><br><span class="line">[root@centos7 ~]# docker network ls</span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line">ffbef008c881        br0                 bridge              local</span><br><span class="line">3c295a6fa80b        bridge              bridge              local</span><br><span class="line">89f4fd8f26e7        host                host                local</span><br><span class="line">0a3b15434b1e        none                null                local</span><br><span class="line"></span><br><span class="line">[root@centos7 ~]# ifconfig </span><br><span class="line">br-ffbef008c881: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500       # 此网卡为新创建的本地桥；</span><br><span class="line">        inet 10.10.10.1  netmask 255.255.0.0  broadcast 10.10.255.255</span><br><span class="line">        ether 02:42:bc:76:de:b9  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 8672  bytes 759405 (741.6 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 5372  bytes 578104 (564.5 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">docker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.17.0.1  netmask 255.255.0.0  broadcast 172.17.255.255</span><br><span class="line">        inet6 fe80::42:aff:fe55:e689  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 02:42:0a:55:e6:89  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 46  bytes 3262 (3.1 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 49  bytes 3572 (3.4 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 00:0c:29:e3:30:ca  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 11508  bytes 745770 (728.2 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 548  bytes 52148 (50.9 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">ens34: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.8.17  netmask 255.255.255.0  broadcast 192.168.8.255</span><br><span class="line">        inet6 fe80::20c:29ff:fee3:30d4  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:e3:30:d4  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 8672  bytes 759405 (741.6 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 5372  bytes 578104 (564.5 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 94  bytes 7940 (7.7 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 94  bytes 7940 (7.7 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 测试运行</span><br><span class="line">[root@centos7 ~]# docker run --name test -it --rm --network br0 busybox:1.27.2 </span><br><span class="line">WARNING: IPv4 forwarding is disabled. Networking will not work.</span><br><span class="line">/ # ifconfig </span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 02:42:0A:0A:0A:00  </span><br><span class="line">          inet addr:10.10.10.0  Bcast:10.10.255.255  Mask:255.255.0.0</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:10 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:0 </span><br><span class="line">          RX bytes:836 (836.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">          RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1 </span><br><span class="line">          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line">/ # route -n </span><br><span class="line">Kernel IP routing table</span><br><span class="line">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class="line">0.0.0.0         10.10.10.1      0.0.0.0         UG    0      0        0 eth0</span><br><span class="line">10.10.0.0       0.0.0.0         255.255.0.0     U     0      0        0 eth0</span><br><span class="line">/ # ping -c 1 10.10.10.1        # 网关也可以ping通；</span><br><span class="line">PING 10.10.10.1 (10.10.10.1): 56 data bytes</span><br><span class="line">64 bytes from 10.10.10.1: seq=0 ttl=64 time=0.083 ms</span><br><span class="line"></span><br><span class="line">--- 10.10.10.1 ping statistics ---</span><br><span class="line">1 packets transmitted, 1 packets received, 0% packet loss</span><br><span class="line">round-trip min/avg/max = 0.083/0.083/0.083 ms</span><br></pre></td></tr></table></figure>
<h3 id="将容器关联之已有网络桥"><a href="#将容器关联之已有网络桥" class="headerlink" title="将容器关联之已有网络桥"></a>将容器关联之已有网络桥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker run -itd --name b1 --rm busybox:1.27.2 httpd -f    # 新运行一个容器b1；</span><br><span class="line">WARNING: IPv4 forwarding is disabled. Networking will not work.</span><br><span class="line">4357b1f6db6ea15827ea7cc020d396434a44883ea88b88589b2d969a1476ffcd</span><br><span class="line">[root@centos7 ~]# docker network connect br0 b1     # 将br0网桥关联至b1容器；</span><br><span class="line">[root@centos7 ~]# docker exec -it b1 sh     # 连接至容器b1；</span><br><span class="line">/ # ifconfig        # 已经关联成功；</span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:02  </span><br><span class="line">          inet addr:172.17.0.2  Bcast:172.17.255.255  Mask:255.255.0.0</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:8 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:0 </span><br><span class="line">          RX bytes:648 (648.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">eth1      Link encap:Ethernet  HWaddr 02:42:0A:0A:0A:02  </span><br><span class="line">          inet addr:10.10.10.2  Bcast:10.10.255.255  Mask:255.255.0.0</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:8 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:0 </span><br><span class="line">          RX bytes:648 (648.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:127.0.0.1  Mask:255.0.0.0</span><br><span class="line">          UP LOOPBACK RUNNING  MTU:65536  Metric:1</span><br><span class="line">          RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1 </span><br><span class="line">          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</span><br><span class="line"></span><br><span class="line">/ #</span><br></pre></td></tr></table></figure>
<h3 id="删除网桥"><a href="#删除网桥" class="headerlink" title="删除网桥"></a>删除网桥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# docker network rm br0         # 删除时注意要把使用br0网桥的容器停止删除；</span><br><span class="line">br0</span><br></pre></td></tr></table></figure>
<h3 id="修改docker0的属性信息"><a href="#修改docker0的属性信息" class="headerlink" title="修改docker0的属性信息"></a>修改docker0的属性信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@centos7 ~]# vim /etc/docker/daemon.json       # 核心选项为bip，即bridge ip之意，用于指定docker0桥自身的iP地址；其它选项可通过此地址计算得出。</span><br><span class="line">&#123;</span><br><span class="line">	&quot;bip&quot;: &quot;192.168.6.1/24&quot;</span><br><span class="line">&#125;</span><br><span class="line">[root@centos7 ~]# systemctl restart docker </span><br><span class="line">[root@centos7 ~]# ifconfig      # 修改成功；</span><br><span class="line">docker0: flags=4099&lt;UP,BROADCAST,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.6.1  netmask 255.255.255.0  broadcast 192.168.6.255</span><br><span class="line">        inet6 fe80::42:aff:fe55:e689  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 02:42:0a:55:e6:89  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 46  bytes 3262 (3.1 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 49  bytes 3572 (3.4 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">ens33: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        ether 00:0c:29:e3:30:ca  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 12783  bytes 825312 (805.9 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 548  bytes 52148 (50.9 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">ens34: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 192.168.8.17  netmask 255.255.255.0  broadcast 192.168.8.255</span><br><span class="line">        inet6 fe80::20c:29ff:fee3:30d4  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 00:0c:29:e3:30:d4  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 11099  bytes 965952 (943.3 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 6874  bytes 771110 (753.0 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 106  bytes 8960 (8.7 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 106  bytes 8960 (8.7 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>
<p><a href="https://docs.docker.com/engine/userguide/networking/default_network/custom-docker0/" target="_blank" rel="noopener">帮助文档：https://docs.docker.com/engine/userguide/networking/default_network/custom-docker0/</a></p>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>