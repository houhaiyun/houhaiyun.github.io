<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>HAProxy配置文件 | Peter's technology stack.</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Haproxy/">Haproxy</a></div><div class="post-time">2017-11-05</div></div></div><div class="container post-header"><h1>HAProxy配置文件</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置文件组成部分"><span class="toc-number">1.</span> <span class="toc-text">配置文件组成部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#简单配置示例"><span class="toc-number">2.</span> <span class="toc-text">简单配置示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#global配置"><span class="toc-number">3.</span> <span class="toc-text">global配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代理配置段"><span class="toc-number">4.</span> <span class="toc-text">代理配置段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#defaults"><span class="toc-number">4.1.</span> <span class="toc-text">defaults</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#fronted"><span class="toc-number">4.2.</span> <span class="toc-text">fronted</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#backend"><span class="toc-number">4.3.</span> <span class="toc-text">backend</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#listen"><span class="toc-number">4.4.</span> <span class="toc-text">listen</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#listen-haproxy-status"><span class="toc-number">4.4.1.</span> <span class="toc-text">listen haproxy_status</span></a></li></ol></li></ol></li></ol></details></div><div class="container post-content"><h3 id="配置文件组成部分"><a href="#配置文件组成部分" class="headerlink" title="配置文件组成部分"></a>配置文件组成部分</h3><ul>
<li><p><code>global</code>：全局配置段</p>
<ul>
<li>进程及安全配置相关的参数</li>
<li>性能调整相关参数</li>
<li><code>Debug</code>参数</li>
</ul>
</li>
<li><p><code>proxies</code>：代理配置段</p>
<ul>
<li><code>defaults</code>：为<code>frontend</code>, <code>backend</code>, <code>listen</code>提供默认配置</li>
<li><code>fronted</code>：前端配置，相当于<code>nginx</code>, <code>server {}</code>，定义前端套接字，接受客户端请求</li>
<li><code>backend</code>：后端，相当于<code>nginx</code>, <code>upstream {}</code>，定义后端分配规则，与后端服务器交互</li>
<li><code>listen</code>：同时拥有前端和后端,适用于一对一环境，将指定的客户端与后端特定服务器绑定到一起</li>
</ul>
</li>
</ul>
<a id="more"></a>
<h3 id="简单配置示例"><a href="#简单配置示例" class="headerlink" title="简单配置示例"></a>简单配置示例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"># Real server1 配置</span><br><span class="line">[root@web1 ~]# yum install -y httpd</span><br><span class="line">[root@web1 ~]# echo &quot;web1&quot; &gt; /var/www/html/index.html</span><br><span class="line">[root@web1 ~]# systemctl start httpd</span><br><span class="line">[root@web1 ~]# curl 192.168.8.12            # 本地测试，ok</span><br><span class="line">web1</span><br><span class="line"></span><br><span class="line"># Real server2 配置</span><br><span class="line">[root@web2 ~]# yum install -y httpd</span><br><span class="line">[root@web2 ~]# echo &quot;web2&quot; &gt; /var/www/html/index.html</span><br><span class="line">[root@web2 ~]# service httpd start</span><br><span class="line">Starting httpd:                                            [  OK  ]</span><br><span class="line">[root@web2 ~]# curl 192.168.8.13            # 本地测试，ok</span><br><span class="line">web2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@centos6 ~]# vim /etc/haproxy/haproxy.cfg          # HAProxy配置文件如下；</span><br><span class="line"></span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># Example configuration for a possible web application.  See the</span><br><span class="line"># full configuration options online.</span><br><span class="line">#</span><br><span class="line">#   http://haproxy.1wt.eu/download/1.4/doc/configuration.txt</span><br><span class="line">#</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># Global settings</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">global</span><br><span class="line">    # to have these messages end up in /var/log/haproxy.log you will</span><br><span class="line">    # need to:</span><br><span class="line">    #   </span><br><span class="line">    # 1) configure syslog to accept network log events.  This is done</span><br><span class="line">    #    by adding the &apos;-r&apos; option to the SYSLOGD_OPTIONS in</span><br><span class="line">    #    /etc/sysconfig/syslog</span><br><span class="line">    #   </span><br><span class="line">    # 2) configure local2 events to go to the /var/log/haproxy.log</span><br><span class="line">    #   file. A line like the following can be added to</span><br><span class="line">    #   /etc/sysconfig/syslog</span><br><span class="line">    #   </span><br><span class="line">    #    local2.*                       /var/log/haproxy.log</span><br><span class="line">    #   </span><br><span class="line">    log         127.0.0.1 local2</span><br><span class="line"></span><br><span class="line">    chroot      /var/lib/haproxy</span><br><span class="line">    pidfile     /var/run/haproxy.pid</span><br><span class="line">    maxconn     4000</span><br><span class="line">    user        haproxy</span><br><span class="line">    group       haproxy</span><br><span class="line">    daemon</span><br><span class="line"></span><br><span class="line">    # turn on stats unix socket</span><br><span class="line">    stats socket /var/lib/haproxy/stats</span><br><span class="line"></span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line"># common defaults that all the &apos;listen&apos; and &apos;backend&apos; sections will</span><br><span class="line"># use if not designated in their block</span><br><span class="line">#---------------------------------------------------------------------</span><br><span class="line">defaults</span><br><span class="line">    mode                    http</span><br><span class="line">    log                     global</span><br><span class="line">    option                  httplog</span><br><span class="line">    option                  dontlognull</span><br><span class="line">    option http-server-close</span><br><span class="line">    option forwardfor       except 127.0.0.0/8</span><br><span class="line">    option                  redispatch</span><br><span class="line">    retries                 3</span><br><span class="line">    timeout http-request    10s</span><br><span class="line">    timeout queue           1m</span><br><span class="line">    timeout connect         10s</span><br><span class="line">    timeout client          1m</span><br><span class="line">    timeout server          1m</span><br><span class="line">    timeout http-keep-alive 10s</span><br><span class="line">    timeout check           10s</span><br><span class="line">    maxconn                 3000</span><br><span class="line"></span><br><span class="line">frontend web            # 下面内容改为添加部分</span><br><span class="line">    bind *:80</span><br><span class="line">    default_backend realsrv</span><br><span class="line"></span><br><span class="line">backend realsrv</span><br><span class="line">    balance roundrobin          # 定义调度算法</span><br><span class="line">    server  ser1 192.168.8.12:80        # 定义real server1</span><br><span class="line">    server  ser2 192.168.8.13:80        # 定义real server2</span><br><span class="line"></span><br><span class="line">[root@centos6 ~]# service haproxy start         # 启动haproxy</span><br><span class="line">Starting haproxy:                                          [  OK  ]</span><br><span class="line"></span><br><span class="line">[root@centos6 ~]# ss -tnul          # 本地80端口已经监听；</span><br><span class="line">Netid State      Recv-Q Send-Q            Local Address:Port              Peer Address:Port </span><br><span class="line">udp   UNCONN     0      0                             *:68                           *:*     </span><br><span class="line">udp   UNCONN     0      0                             *:57096                        *:*     </span><br><span class="line">tcp   LISTEN     0      128                           *:80                           *:*     </span><br><span class="line">tcp   LISTEN     0      128                          :::22                          :::*     </span><br><span class="line">tcp   LISTEN     0      128                           *:22                           *:*     </span><br><span class="line">tcp   LISTEN     0      100                         ::1:25                          :::*     </span><br><span class="line">tcp   LISTEN     0      100                   127.0.0.1:25                           *:*    </span><br><span class="line"></span><br><span class="line">[root@centos6 ~]# curl 192.168.8.11         # 测试访问，192.168.8.11就是haproxy的iP,代理成功；</span><br><span class="line">web1</span><br><span class="line">[root@centos6 ~]# curl 192.168.8.11</span><br><span class="line">web2</span><br><span class="line">[root@centos6 ~]# curl 192.168.8.11</span><br><span class="line">web1</span><br><span class="line">[root@centos6 ~]# curl 192.168.8.11</span><br><span class="line">web2</span><br></pre></td></tr></table></figure>
<h3 id="global配置"><a href="#global配置" class="headerlink" title="global配置"></a>global配置</h3><p>进程及安全管理： <code>chroot</code>, <code>deamon</code>， <code>user</code>, <code>group</code>, <code>uid</code>, <code>gid</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">global          # 全局配置</span><br><span class="line"></span><br><span class="line">    log         127.0.0.1 local2        # 日志记录，默认记录到本地，最多可以定义两个；</span><br><span class="line"></span><br><span class="line">    chroot      /var/lib/haproxy        # 修改haproxy的工作目录至指定的目录并在放弃权限之前执行chroot()操作，可以提升haproxy的安全级别，不过需要注意的是要确保指定的目录为空目录且任何用户均不能有写权限；</span><br><span class="line">    pidfile     /var/run/haproxy.pid    # 指定PID文件路径；</span><br><span class="line">    daemon                              # 让haproxy以守护进程的方式工作于后台，其等同于“-D”选项的功能，当然，也可以在命令行中以“-db”选项将其禁用；</span><br><span class="line">    user        haproxy         # 指定运行haproxy用户；</span><br><span class="line">    group       haproxy         # 指定运行haproxy组；</span><br><span class="line">        nbproc &lt;number&gt;             # 指定启动的haproxy进程的个数，只能用于守护进程模式(daemon)的haproxy；默认只启动一个进程，鉴于调试困难等多方面的原因，一般只在单进程仅能打开少数文件描述符的场景中才使用多进程模式；</span><br><span class="line">    ulimit -n &lt;number&gt;          # 设定每进程所能够打开的最大文件描述符数目，默认情况下其会自动进行计算，因此不推荐修改此选项；</span><br><span class="line">    stats socket /var/lib/haproxy/stats         # 打开unix套接字；</span><br><span class="line">    maxconn &lt;number&gt;                # 设定每个haproxy进程所能接受的最大并发连接数；</span><br><span class="line">    maxconnrate &lt;number&gt;            # 设置每个进程每秒种所能建立的最大连接数量；</span><br><span class="line">    maxsessrate &lt;number&gt;            # 设置每个进程每秒种所能建立的最大会话数量；</span><br><span class="line">    maxsslconn &lt;number&gt;             # 每进程支持SSL的最大连接数量；</span><br><span class="line">    spread-checks &lt;0..50, in percent&gt;           # 健康检测延迟时长比建议2-5之间；</span><br><span class="line">    maxpipes &lt;number&gt;                   # haproxy使用pipe完成基于内核的tcp报文重组，此选项则用于设定每进程所允许使用的最大pipe个数；每个pipe会打开两个文件描述符，因此，“ulimit -n”自动计算时会根据需要调大此值；默认为maxconn/4，其通常会显得过大；</span><br><span class="line">    noepoll                 # 在Linux系统上禁用epoll机制；</span><br><span class="line">    nokqueue                    # 在BSD系统上禁用kqueue机制；</span><br><span class="line">    nopoll                  # 禁用poll机制；</span><br><span class="line">    nosepoll                # 在Linux禁用启发式epoll机制；</span><br><span class="line">    nosplice                # 禁止在Linux套接字上使用内核tcp重组，这会导致更多的recv/send系统调用；不过，在Linux 2.6.25-28系列的内核上，tcp重组功能有bug存在；</span><br><span class="line">    spread-checks &lt;0..50, in percent&gt;               # 在haproxy后端有着众多服务器的场景中，在精确的时间间隔后统一对众服务器进行健康状况检查可能会带来意外问题；此选项用于将其检查的时间间隔长度上增加或减小一定的随机时长；</span><br><span class="line">    tune.bufsize &lt;number&gt;               # 设定buffer的大小，同样的内存条件下，较小的值可以让haproxy有能力接受更多的并发连接，较大的值可以让某些应用程序使用较大的cookie信息；默认为16384，其可以在编译时修改，不过强烈建议使用默认值；</span><br><span class="line">    tune.chksize &lt;number&gt;           # 设定检查缓冲区的大小，单位为字节；更大的值有助于在较大的页面中完成基于字符串或模式的文本查找，但也会占用更多的系统资源；不建议修改；</span><br><span class="line">    tune.maxaccept &lt;number&gt;         # 设定haproxy进程内核调度运行时一次性可以接受的连接的个数，较大的值可以带来较大的吞吐率，默认在单进程模式下为100，多进程模式下为8，设定为-1可以禁止此限制；一般不建议修改；</span><br><span class="line">    tune.maxpollevents  &lt;number&gt;            # 设定一次系统调用可以处理的事件最大数，默认值取决于OS；其值小于200时可节约带宽，但会略微增大网络延迟，而大于200时会降低延迟，但会稍稍增加网络带宽的占用量；</span><br><span class="line">    tune.maxrewrite &lt;number&gt;            # 设定为首部重写或追加而预留的缓冲空间，建议使用1024左右的大小；在需要使用更大的空间时，haproxy会自动增加其值；</span><br><span class="line">    tune.rcvbuf.server &lt;number&gt;     # 设定内核套接字中服务端或客户端接收缓冲的大小，单位为字节；强烈推荐使用默认值；</span><br></pre></td></tr></table></figure>
<h3 id="代理配置段"><a href="#代理配置段" class="headerlink" title="代理配置段"></a>代理配置段</h3><h4 id="defaults"><a href="#defaults" class="headerlink" title="defaults"></a>defaults</h4><p><code>defaults</code>：为<code>frontend</code>, <code>backend</code>, <code>listen</code>提供默认配置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">defaults            # 默认配置项</span><br><span class="line">    mode                    http        # 默认工作模式为7层http，4层tcp；</span><br><span class="line">    log                     global      # 使用全局日志；</span><br><span class="line">    option                  httplog     # 日志类别http日志格式 ；</span><br><span class="line">    option                  dontlognull     # 不记录健康检查的日志信息 ；</span><br><span class="line">    option http-server-close            # 允许客户端关闭连接；</span><br><span class="line">    option forwardfor       except 127.0.0.0/8      # 如果后端服务器需要获得客户端真实ip需要配置的参数，可以从Http Header中获得客户端ip ，本地IP不记录；</span><br><span class="line">    option                  redispatch  # server Id对应的服务器挂掉后,强制定向到其他健康的服务器  ；</span><br><span class="line">    option abortonclose                 # 当服务器负载很高的时候，自动结束掉当前队列处理比较久的连接 ；</span><br><span class="line">    balance roundrobin                  # 默认的负载均衡的方式,轮询方式 ；</span><br><span class="line">    stats refresh 30                    # 统计页面刷新间隔 ；</span><br><span class="line">    retries                 3           # 请求重试次数，3次连接失败就认为服务不可用，也可以通过后面设置； </span><br><span class="line">    timeout http-request    10s         # http请求超时时间；</span><br><span class="line">    timeout queue           1m          </span><br><span class="line">    timeout connect         10s </span><br><span class="line">    timeout client          1m  </span><br><span class="line">    timeout server          1m  </span><br><span class="line">    timeout http-keep-alive 10s </span><br><span class="line">    timeout check           10s         # 健康检查超时时间；</span><br><span class="line">    maxconn                 3000        # 最大并发连接数；</span><br></pre></td></tr></table></figure>
<h4 id="fronted"><a href="#fronted" class="headerlink" title="fronted"></a>fronted</h4><p><code>fronted</code>：前端，相当于<code>nginx</code>, <code>server {}</code>，定义前端套接字，接受客户端请求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">frontend web        # 定义前端名称；</span><br><span class="line">    bind *:80       # 监听所有IP的80端口；</span><br><span class="line">    default_backend websers     # 默认后端server为websers；</span><br></pre></td></tr></table></figure>
<h4 id="backend"><a href="#backend" class="headerlink" title="backend"></a>backend</h4><p><code>backend</code>：后端，相当于<code>nginx</code>, <code>upstream {}</code>，定义后端分配规则，与后端服务器交互</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">backend websers         # 后端名称；</span><br><span class="line">    balance roundrobin      # 调度算法；</span><br><span class="line">    server ser1 192.168.8.12:80     # real server IP为192.168.8.12，端口为80；</span><br><span class="line">    server ser2 192.168.8.13:80     # real server IP为192.168.8.13，端口为80；</span><br></pre></td></tr></table></figure>
<h4 id="listen"><a href="#listen" class="headerlink" title="listen"></a>listen</h4><p><code>listen</code>：同时拥有前端和后端,适用于一对一环境，将指定的客户端与后端特定服务器绑定到一起</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">listen webser       # name；</span><br><span class="line">    bind *:80       # 监听所有IP的80端口；</span><br><span class="line">    mode http       # http的7层模式；</span><br><span class="line">    balance roundrobin      # 调度算法为轮询；</span><br><span class="line">    server ser1 192.168.8.12:80     # real server IP为192.168.8.12，端口为80；</span><br><span class="line">    server ser2 192.168.8.13:80     # real server IP为192.168.8.13，端口为80；</span><br></pre></td></tr></table></figure>
<h5 id="listen-haproxy-status"><a href="#listen-haproxy-status" class="headerlink" title="listen haproxy_status"></a>listen haproxy_status</h5><p>监控界面的设置。</p>
<pre><code>listen admin_status                    # Frontend和Backend的组合体,监控组的名称，按需自定义名称 ；
        bind 0.0.0.0:65532             # 监听端口 ；
        mode http                      # http的7层模式 ；
        log 127.0.0.1 local3 err       # 错误日志记录 ；
        stats refresh 5s               # 每隔5秒自动刷新监控页面 ；
        stats uri /admin?stats         # 监控页面的url ；
        stats realm itnihao\ itnihao   # 监控页面的提示信息 ；
        stats auth admin:admin         # 监控页面的用户和密码admin,可以设置多个用户名 ；
        stats auth admin1:123456       # 监控页面的用户和密码123456；
        stats hide-version             # 隐藏统计页面上的HAproxy版本信息  ；
        stats admin if TRUE            # 手工启用/禁用,后端服务器(haproxy-1.4.9以后版本) ；
</code></pre></div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>