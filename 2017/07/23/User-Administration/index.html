<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>用户组管理相关命令 | Keep learn!</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a><a class="sidebar-nav-item" href="/about">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/用户和组/">用户和组</a></div><div class="post-time">2017-07-23</div></div></div><div class="container post-header"><h1>用户组管理相关命令</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#用户和组管理命令"><span class="toc-number">1.</span> <span class="toc-text">用户和组管理命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新增用户：useradd"><span class="toc-number">2.</span> <span class="toc-text">新增用户：useradd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新增用户默认值"><span class="toc-number">3.</span> <span class="toc-text">新增用户默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#新建用户的相关文件和命令"><span class="toc-number">4.</span> <span class="toc-text">新建用户的相关文件和命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户属性修改：usermod"><span class="toc-number">5.</span> <span class="toc-text">用户属性修改：usermod</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除用户：userdel"><span class="toc-number">6.</span> <span class="toc-text">删除用户：userdel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看用户相关的ID信息"><span class="toc-number">7.</span> <span class="toc-text">查看用户相关的ID信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#切换用户或以其他用户身份执行命令"><span class="toc-number">8.</span> <span class="toc-text">切换用户或以其他用户身份执行命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置密码"><span class="toc-number">9.</span> <span class="toc-text">设置密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改用户密码策略"><span class="toc-number">10.</span> <span class="toc-text">修改用户密码策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户相关的其它命令"><span class="toc-number">11.</span> <span class="toc-text">用户相关的其它命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建组：groupadd"><span class="toc-number">12.</span> <span class="toc-text">创建组：groupadd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#修改组：groupmod"><span class="toc-number">13.</span> <span class="toc-text">修改组：groupmod</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#组删除：-groupdel"><span class="toc-number">14.</span> <span class="toc-text">组删除： groupdel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更改组密码：gpasswd"><span class="toc-number">15.</span> <span class="toc-text">更改组密码：gpasswd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#newgrp命令：临时切换主组"><span class="toc-number">16.</span> <span class="toc-text">newgrp命令：临时切换主组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更改和查看组成员"><span class="toc-number">17.</span> <span class="toc-text">更改和查看组成员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#将用户加入组的几种方法"><span class="toc-number">18.</span> <span class="toc-text">将用户加入组的几种方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多个用户添加到一个组"><span class="toc-number">19.</span> <span class="toc-text">多个用户添加到一个组</span></a></li></ol></details></div><div class="container post-content"><h3 id="用户和组管理命令"><a href="#用户和组管理命令" class="headerlink" title="用户和组管理命令"></a>用户和组管理命令</h3><p><strong>用户管理命令</strong></p>
<ul>
<li>useradd：新增用户</li>
<li>usermod：修改用户属性</li>
<li>userdel：删除用户</li>
<li>查看用户相关ID信息</li>
<li>切换用户或以其他用户身份执行命令</li>
<li>设置密码</li>
<li>修改用户密码策略</li>
<li>用户相关的其它命令</li>
</ul>
<p><strong>组帐号维护命令</strong></p>
<ul>
<li>groupadd：新增组</li>
<li>groupmod：修改组属性</li>
<li>groupdel：删除组</li>
<li>gpasswd：更改组密码</li>
<li>newgrp：临时切换主组</li>
<li>更改和查看组成员</li>
<li>将用户加入组的几种方法</li>
<li>多个用户添加到一个组</li>
</ul>
<a id="more"></a>
<h3 id="新增用户：useradd"><a href="#新增用户：useradd" class="headerlink" title="新增用户：useradd"></a>新增用户：useradd</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">useradd [options] LOGIN</span><br><span class="line">    -u UID: [UID_MIN, UID_MAX]定义在/etc/login.defs</span><br><span class="line">        例如：指定UID为999999</span><br><span class="line">        [root@centos7 ~]# useradd -u 999999 hello</span><br><span class="line">        [root@centos7 ~]# id hello</span><br><span class="line">        uid=999999(hello) gid=10000(hello) groups=10000(hello)</span><br><span class="line"></span><br><span class="line">    -o 配合-u选项，不检查UID的唯一性</span><br><span class="line">        例如：</span><br><span class="line">        [root@centos7 ~]# useradd -o  -u  999999 hai</span><br><span class="line">        [root@centos7 ~]# id hello</span><br><span class="line">        uid=999999(hello) gid=10000(hello) groups=10000(hello)</span><br><span class="line">        [root@centos7 ~]# id hai</span><br><span class="line">        uid=999999(hello) gid=10000(hello) groups=10000(hello)</span><br><span class="line"></span><br><span class="line">    -g GID：指明用户所属基本组，可为组名，也可以GID</span><br><span class="line">    -c &quot;COMMENT&quot;：用户的注释信息</span><br><span class="line">    -d HOME_DIR: 以指定的路径(不存在)为家目录</span><br><span class="line">    -s SHELL: 指明用户的默认shell程序</span><br><span class="line">        可用列表在/etc/shells文件中</span><br><span class="line">    -G GROUP1[,GROUP2,...]：为用户指明附加组，组须事先存在</span><br><span class="line">    -N 不创建私用组做主组，使用users组做主组</span><br><span class="line">    -r: 创建系统用户 CentOS 6: ID&lt;500， CentOS 7: ID&lt;1000</span><br><span class="line">    </span><br><span class="line">    例如：创建 UID为123456，主组为user1 付加组为jerr 家目录为 /app/user3 shell为/bin/csh </span><br><span class="line">    [root@centos7 ~]# useradd -o  -u 123456 -g user1 -G jerr -d /app/user3 -s /bin/csh -c &quot;good&quot; user3</span><br></pre></td></tr></table></figure>
<h3 id="新增用户默认值"><a href="#新增用户默认值" class="headerlink" title="新增用户默认值"></a>新增用户默认值</h3><ul>
<li>默认值设定：/etc/default/useradd文件中</li>
<li>显示或更改默认设置：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">useradd -D  显示新建用户默认属性</span><br><span class="line">    例如：</span><br><span class="line">    [root@centos7 ~]# useradd -D</span><br><span class="line">    GROUP=100</span><br><span class="line">    HOME=/home</span><br><span class="line">    INACTIVE=-1</span><br><span class="line">    EXPIRE=</span><br><span class="line">    SHELL=/bin/bash</span><br><span class="line">    SKEL=/etc/skel</span><br><span class="line">    CREATE_MAIL_SPOOL=yes</span><br><span class="line"></span><br><span class="line">useradd –D -s SHELL     #修改新建用户的默认shell</span><br><span class="line">useradd –D –b BASE_DIR  #修改新建用户的默认家目录</span><br><span class="line">useradd –D –g GROUP     #修改新建用户的默认组</span><br></pre></td></tr></table></figure>
<h3 id="新建用户的相关文件和命令"><a href="#新建用户的相关文件和命令" class="headerlink" title="新建用户的相关文件和命令"></a>新建用户的相关文件和命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/etc/default/useradd # 新建用户默认配置文件</span><br><span class="line">/etc/skel/*  # 新建用户的文件，例如：</span><br><span class="line">    [root@centos6 ~]# ls -a /etc/skel/</span><br><span class="line">    .  ..  .bash_logout  .bash_profile  .bashrc  .gnome2  .mozilla</span><br><span class="line"></span><br><span class="line">/etc/login.defs # 用户登陆默认文件</span><br><span class="line">newusers passwd格式文件 批量创建用户 </span><br><span class="line">chpasswd 批量修改用户口令</span><br></pre></td></tr></table></figure>
<h3 id="用户属性修改：usermod"><a href="#用户属性修改：usermod" class="headerlink" title="用户属性修改：usermod"></a>用户属性修改：usermod</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">usermod [OPTION] login</span><br><span class="line">    -u UID: 新UID</span><br><span class="line">    -g GID: 新主组</span><br><span class="line">    -G GROUP1[,GROUP2,...[,GROUPN]]]：新附加组，原来的</span><br><span class="line">附加组将会被覆盖；若保留原有，则要同时使用-a选项</span><br><span class="line">    -s SHELL：新的默认SHELL</span><br><span class="line">    -c &apos;COMMENT&apos;：新的注释信息</span><br><span class="line">    -d HOME: 新家目录不会自动创建；若要创建新家目录并移</span><br><span class="line">    动原家数据，同时使用-m选项</span><br><span class="line">    -l login_name: 新的名字；</span><br><span class="line">    -L: lock指定用户,在/etc/shadow 密码栏的增加 !</span><br><span class="line">    -U: unlock指定用户,将 /etc/shadow 密码栏的 ! 拿掉</span><br><span class="line">    -e YYYY-MM-DD: 指明用户账号过期日期</span><br><span class="line">    -f INACTIVE: 设定非活动期限</span><br><span class="line"></span><br><span class="line">范例1：修改haiyun用户的UID为6666</span><br><span class="line">    [root@centos7 ~]# id haiyun </span><br><span class="line">    uid=1004(haiyun) gid=1004(haiyun) groups=1004(haiyun)</span><br><span class="line">    [root@centos7 ~]# usermod -u 6666 haiyun</span><br><span class="line">    [root@centos7 ~]# id haiyun</span><br><span class="line">    uid=6666(haiyun) gid=1004(haiyun) groups=1004(haiyun)</span><br><span class="line"></span><br><span class="line">范例2：修改用户haiyun的说明列，加上“haiyun&apos;s test”</span><br><span class="line">    [root@centos7 ~]# usermod -c &quot;haiyun&apos;s test&quot; haiyun</span><br><span class="line">    [root@centos7 ~]# getent  passwd haiyun</span><br><span class="line">    haiyun<img class="github-emoji" title="x" alt="x" src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8" height="20" width="20">6666:1004:haiyun&apos;s test:/home/haiyun:/bin/bash</span><br><span class="line"></span><br><span class="line">范例3：修改用户haiyun密码在2017年8月14日失效</span><br><span class="line">    [root@centos7 ~]# usermod -e 2017-08-15 haiyun </span><br><span class="line">    [root@centos7 ~]# getent shadow haiyun</span><br><span class="line">    haiyun:$6$QzvQ4qfN$kbiUQYmdV9oehOHnXmQ/DYW83czB..nhEWhxqo.v25W6kiBxBWFEN0kLuraSSxwDdX340HcK5zWULX7GzpGLV.:17391:0:99999:7::17393:        &lt;==第8个字段代表密码失效时间17393，是使用1970年以来的总日数设置</span><br><span class="line"></span><br><span class="line">范例4：新建用户haiyun这个系统账号时并没有给予主文件夹，请新建他的主文件夹</span><br><span class="line">[root@centos7 ~]# ll -d ~haiyun                 &lt;==haiyun用户确实没有家目录</span><br><span class="line">ls: cannot access /home/haiyun: No such file or directory</span><br><span class="line">[root@centos7 ~]# cp -a /etc/skel /home/haiyun      &lt;==复制模板文件</span><br><span class="line">[root@centos7 ~]# chown -R haiyun:haiyun /home/haiyun/  &lt;==修改所有者和所属组</span><br><span class="line">[root@centos7 ~]# chmod 700 /home/haiyun/           &lt;==修改权限</span><br><span class="line">[root@centos7 ~]# ll -a ~haiyun                     &lt;==查看</span><br><span class="line">total 12</span><br><span class="line">drwx------. 3 haiyun haiyun  78 Jul 14 11:16 .</span><br><span class="line">drwxr-xr-x. 6 root   root    71 Aug 13 14:37 ..</span><br><span class="line">-rw-r--r--. 1 haiyun haiyun  18 Aug  3  2016 .bash_logout</span><br><span class="line">-rw-r--r--. 1 haiyun haiyun 193 Aug  3  2016 .bash_profile</span><br><span class="line">-rw-r--r--. 1 haiyun haiyun 231 Aug  3  2016 .bashrc</span><br><span class="line">drwxr-xr-x. 4 haiyun haiyun  39 Jul 14 11:16 .mozilla</span><br></pre></td></tr></table></figure>
<h3 id="删除用户：userdel"><a href="#删除用户：userdel" class="headerlink" title="删除用户：userdel"></a>删除用户：userdel</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">userdel [OPTION]... login</span><br><span class="line">    -r: 删除用户家目录</span><br><span class="line"></span><br><span class="line">范例1：删除用户haiyun，且把她的家目录一块删除</span><br><span class="line">[root@centos7 ~]# userdel -r haiyun</span><br></pre></td></tr></table></figure>
<h3 id="查看用户相关的ID信息"><a href="#查看用户相关的ID信息" class="headerlink" title="查看用户相关的ID信息"></a>查看用户相关的ID信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">id [OPTION]... [USER]</span><br><span class="line">    -u: 显示UID</span><br><span class="line">    -g: 显示GID</span><br><span class="line">    -G: 显示用户所属的组的ID</span><br><span class="line">    -n: 显示名称，需配合ugG使用</span><br><span class="line"></span><br><span class="line">范例1：查看haiyun用户的UID</span><br><span class="line">    [root@centos7 ~]# id -u haiyun</span><br><span class="line">    1004</span><br><span class="line"></span><br><span class="line">范例2：查看haiyun用户的GID</span><br><span class="line">    [root@centos7 ~]# id -g haiyun</span><br><span class="line">    1004</span><br><span class="line"></span><br><span class="line">范例3：根据UID 1004查看是哪个用户</span><br><span class="line">    [root@centos7 ~]# id -n 1004 -u </span><br><span class="line">    haiyun</span><br></pre></td></tr></table></figure>
<h3 id="切换用户或以其他用户身份执行命令"><a href="#切换用户或以其他用户身份执行命令" class="headerlink" title="切换用户或以其他用户身份执行命令"></a>切换用户或以其他用户身份执行命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">su [options...] [-] [user [args...]]</span><br><span class="line">切换用户的方式：</span><br><span class="line">    su UserName：非登录式切换，即不会读取目标用户的</span><br><span class="line">配置文件，不改变当前工作目录</span><br><span class="line">    su - UserName：登录式切换，会读取目标用户的配置文件，切换至家目录，完全切换</span><br><span class="line">root su至其他用户无须密码；非root用户切换时需要密码</span><br><span class="line">换个身份执行命令：</span><br><span class="line">    su [-] UserName -c &apos;COMMAND&apos;</span><br><span class="line">选项： -l --login</span><br><span class="line">    su -l UserName 相当于 su - UserName</span><br><span class="line">    </span><br><span class="line">范例1：以非登陆方式切换到用户haiyun</span><br><span class="line">    [root@centos7 ~]# su haiyun</span><br><span class="line">    [haiyun@centos7 root]$ pwd</span><br><span class="line">    /root</span><br><span class="line"></span><br><span class="line">范例2：以登陆方式切换到用户haiyun</span><br><span class="line">    [root@centos7 ~]# su - haiyun</span><br><span class="line">    Last login: Sun Aug 13 14:46:40 CST 2017 on pts/0</span><br><span class="line">    [haiyun@centos7 ~]$ pwd</span><br><span class="line">    /home/haiyun</span><br><span class="line"></span><br><span class="line">范例3：切换到haiyun用户，查看root目录下的内容，使用su 执行命令ls</span><br><span class="line">    [root@centos7 ~]# su haiyun</span><br><span class="line">    [haiyun@centos7 root]$ ls</span><br><span class="line">    ls: cannot open directory .: Permission denied</span><br><span class="line">    [haiyun@centos7 root]$ su - -c &quot;ls&quot;</span><br><span class="line">    Password: </span><br><span class="line">    anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates</span><br><span class="line">    Desktop		 Downloads  Music		  Public    Videos</span><br></pre></td></tr></table></figure>
<h3 id="设置密码"><a href="#设置密码" class="headerlink" title="设置密码"></a>设置密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">passwd [OPTIONS] UserName: 修改指定用户的密码，仅root用户权限</span><br><span class="line">passwd: 修改自己的密码</span><br><span class="line">常用选项：</span><br><span class="line">    -l:锁定指定用户</span><br><span class="line">    -u:解锁指定用户</span><br><span class="line">    -e:强制用户下次登录修改密码</span><br><span class="line">    -n mindays: 指定最短使用期限</span><br><span class="line">    -x maxdays：最大使用期限</span><br><span class="line">    -w warndays：提前多少天开始警告</span><br><span class="line">    -i inactivedays：非活动期限</span><br><span class="line">    --stdin：从标准输入接收用户密码</span><br><span class="line">    echo &quot;PASSWORD&quot; | passwd --stdin USERNAME</span><br><span class="line"></span><br><span class="line">范例1：请root用户为haiyun用户设置密码</span><br><span class="line">    [root@centos7 ~]# passwd haiyun         &lt;==为haiyun设置密码，后面不跟用户就是为自己设置密码</span><br><span class="line">    Changing password for user haiyun.</span><br><span class="line">    New password: </span><br><span class="line">    BAD PASSWORD: The password is shorter than 8 characters     &lt;==密码太过简单或太短的报错！</span><br><span class="line">    Retype new password: </span><br><span class="line">    passwd: all authentication tokens updated successfully.     &lt;==虽然简单或短但还是设置成功了！</span><br><span class="line"></span><br><span class="line">范例2：haiyun为自己设定密码</span><br><span class="line">    [haiyun@centos7 ~]$ passwd </span><br><span class="line">    Changing password for user haiyun.</span><br><span class="line">    Changing password for haiyun.</span><br><span class="line">    (current) UNIX password:        &lt;==此处输入原来的旧密码，如果旧密码输入不通过的话是无法设置新密码的！</span><br><span class="line">    New password:                   &lt;==输入新密码，密码不通过，少于8位（要符合密码复杂策略）</span><br><span class="line">    BAD PASSWORD: The password is shorter than 8 characters</span><br><span class="line">    New password:                   &lt;==重新输入</span><br><span class="line">    Retype new password:            &lt;==已通过再次输入</span><br><span class="line">    passwd: all authentication tokens updated successfully.     &lt;==设置成功</span><br><span class="line"></span><br><span class="line">范例3：使用标准输入来设置密码</span><br><span class="line">    [root@centos7 ~]# echo &quot;haiyun&quot; | passwd --stdin haiyun</span><br><span class="line">    Changing password for user haiyun.</span><br><span class="line">    passwd: all authentication tokens updated successfully.</span><br><span class="line"></span><br><span class="line">范例4：管理haiyun的密码，使其具有30天更改、10天密码失效的设置</span><br><span class="line">    [root@centos7 ~]# passwd -S haiyun</span><br><span class="line">    haiyun PS 2017-08-13 0 99999 7 -1 (Password set, SHA512 crypt.)</span><br><span class="line">    # 以上依次为：密码新建时间、密码最短有效期(0)、密码最长有效期(99999)、密码过期警告天数(7)、密码失效时间(-1：代表永久不会失效)、括号里的内容代表密码已设置使用SHA512加密</span><br><span class="line">    [root@centos7 ~]# passwd -x 30 -i 10 haiyun</span><br><span class="line">    Adjusting aging data for user haiyun.</span><br><span class="line">    passwd: Success</span><br><span class="line">    [root@centos7 ~]# passwd -S haiyun</span><br><span class="line">    haiyun PS 2017-08-13 0 30 7 10 (Password set, SHA512 crypt.)</span><br><span class="line"></span><br><span class="line">范例5：让haiyun的账号失效，查看完毕再让他失效</span><br><span class="line">    [root@centos7 ~]# passwd -l haiyun      </span><br><span class="line">    Locking password for user haiyun.</span><br><span class="line">    passwd: Success</span><br><span class="line">    [root@centos7 ~]# passwd -S haiyun</span><br><span class="line">    haiyun LK 2017-08-13 0 30 7 10 (Password locked.)   &lt;==可以看到密码已失效</span><br><span class="line">    [root@centos7 ~]# getent shadow haiyun</span><br><span class="line">    haiyun:!!$6$ExWq7rry$kmJHHH8TeTzLH87b9x1iRRqDUwgNGDLmd9qcF/JxoX6rgkSfrmz7cCgZvbCOri0evGe8Yh51RCLnDW6I6Pfqk1:17391:0:30:7:10::        &lt;==在密码字段前面家里两个!!</span><br></pre></td></tr></table></figure>
<h3 id="修改用户密码策略"><a href="#修改用户密码策略" class="headerlink" title="修改用户密码策略"></a>修改用户密码策略</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">chage [-ldEImMW]帐号名</span><br><span class="line">选项与参数：</span><br><span class="line">    -l ：列出该帐号的详细密码参数；</span><br><span class="line">    -d ：后面接日期，修改shadow 第三栏位(最近一次更改密码的日期)，格式YYYY-MM-DD</span><br><span class="line">    -E ：后面接日期，修改shadow 第八栏位(帐号失效日)，格式YYYY-MM-DD</span><br><span class="line">    -I ：后面接天数，修改shadow 第七栏位(密码失效日期)</span><br><span class="line">    -m ：后面接天数，修改shadow 第四栏位(密码最短保留天数)</span><br><span class="line">    -M ：后面接天数，修改shadow 第五栏位(密码多久需要进行变更)</span><br><span class="line">    -W ：后面接天数，修改shadow 第六栏位(密码过期前警告日期)</span><br><span class="line"></span><br><span class="line">范例1：列出haiyun的详细密码参数</span><br><span class="line">    [root@centos7 ~]# chage -l haiyun</span><br><span class="line">    Last password change					: Aug 13, 2017</span><br><span class="line">    Password expires					: Sep 12, 2017</span><br><span class="line">    Password inactive					: Sep 22, 2017</span><br><span class="line">    Account expires						: never</span><br><span class="line">    Minimum number of days between password change		: 0</span><br><span class="line">    Maximum number of days between password change		: 30</span><br><span class="line">    Number of days of warning before password expires	: 7</span><br><span class="line"></span><br><span class="line">范例2：新建一个名为test的账号，该账号第一次登陆后使用默认密码，但必须要更改过密码后使用新密码才能够登陆系统使用bash环境</span><br><span class="line">    [root@centos7 ~]# useradd test</span><br><span class="line">    [root@centos7 ~]# echo &quot;test123&quot;|passwd --stdin test</span><br><span class="line">    Changing password for user test.</span><br><span class="line">    passwd: all authentication tokens updated successfully.</span><br><span class="line">    [root@centos7 ~]# chage -d 0 test</span><br><span class="line"></span><br><span class="line">范例3：尝试以test登陆的情况</span><br><span class="line">    WARNING: Your password has expired.</span><br><span class="line">    You must change your password now and login again!      </span><br><span class="line">    Changing password for user test.</span><br><span class="line">    Changing password for test.</span><br><span class="line">    (current) UNIX password:    &lt;==输入当前密码</span><br><span class="line">    New password:               &lt;==输入新密码，密码太短</span><br><span class="line">    BAD PASSWORD: The password is shorter than 8 characters</span><br><span class="line">    New password:               &lt;==重新输入</span><br><span class="line">    Retype new password:        &lt;==再次输入</span><br><span class="line">    passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></table></figure>
<h3 id="用户相关的其它命令"><a href="#用户相关的其它命令" class="headerlink" title="用户相关的其它命令"></a>用户相关的其它命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">finger [-s] username    #查阅用户相关信息</span><br><span class="line">选项与参数：</span><br><span class="line">    -s ：仅列出使用者的帐号、全名、终端机代号与登入时间等等；</span><br><span class="line">    -m ：列出与后面接的帐号相同者，而不是利用部分比对(包括全名部分)</span><br><span class="line">范例：查看用户haiyun的相关属性信息</span><br><span class="line">    [root@centos7 ~]# finger haiyun</span><br><span class="line">    Login: haiyun         			Name: </span><br><span class="line">    Directory: /home/haiyun             	Shell: /bin/bash</span><br><span class="line">    Last login Sun Aug 13 14:56 (CST) on pts/0</span><br><span class="line">    No mail.</span><br><span class="line">    No Plan.</span><br><span class="line"></span><br><span class="line">chfn [-foph] [帐号名]   #修改用户相关信息</span><br><span class="line">选项与参数：</span><br><span class="line">    -f ：后面接完整的大名；</span><br><span class="line">    -o ：您办公室的房间号码；</span><br><span class="line">    -p ：办公室的电话号码；</span><br><span class="line">    -h ：家里的电话号码！</span><br><span class="line"></span><br><span class="line">范例：修改haiyun的信息</span><br><span class="line">    [root@centos7 ~]# chfn haiyun</span><br><span class="line">    Changing finger information for haiyun.</span><br><span class="line">    Name []: haiyun</span><br><span class="line">    Office []: haiyun</span><br><span class="line">    Office Phone []: 100</span><br><span class="line">    Home Phone []: 101</span><br><span class="line">    </span><br><span class="line">    Finger information changed.</span><br><span class="line">    [root@centos7 ~]# finger haiyun</span><br><span class="line">    Login: haiyun         			Name: haiyun</span><br><span class="line">    Directory: /home/haiyun             	Shell: /bin/bash</span><br><span class="line">    Office: haiyun, 100			Home Phone: 101</span><br><span class="line">    Last login Sun Aug 13 14:56 (CST) on pts/0</span><br><span class="line">    No mail.</span><br><span class="line">    No Plan.</span><br><span class="line"></span><br><span class="line">chsh [-ls]  #修改shell</span><br><span class="line">选项与参数：</span><br><span class="line">    -l ：列出目前系统上面可用的shell ，其实就是/etc/shells 的内容！</span><br><span class="line">    -s ：设定修改自己的Shell 啰</span><br><span class="line"></span><br><span class="line">范例1：列出当前系统上所有合法的shell</span><br><span class="line">    方法①：</span><br><span class="line">        [root@centos7 ~]# chsh -l</span><br><span class="line">        /bin/sh</span><br><span class="line">        /bin/bash</span><br><span class="line">        /sbin/nologin</span><br><span class="line">        /usr/bin/sh</span><br><span class="line">        /usr/bin/bash</span><br><span class="line">        /usr/sbin/nologin</span><br><span class="line">        /bin/tcsh</span><br><span class="line">        /bin/csh</span><br><span class="line">    方法②：</span><br><span class="line">        [root@centos7 ~]# cat /etc/shells </span><br><span class="line">        /bin/sh</span><br><span class="line">        /bin/bash</span><br><span class="line">        /sbin/nologin</span><br><span class="line">        /usr/bin/sh</span><br><span class="line">        /usr/bin/bash</span><br><span class="line">        /usr/sbin/nologin</span><br><span class="line">        /bin/tcsh</span><br><span class="line">        /bin/csh</span><br><span class="line"></span><br><span class="line">范例2：修改用户haiyun的shell为csh   </span><br><span class="line">    [root@centos7 ~]# chsh -s /bin/csh haiyun   &lt;==注意：不要随便修改shell</span><br><span class="line">    Changing shell for haiyun.</span><br><span class="line">    Shell changed.</span><br><span class="line">    [root@centos7 ~]# getent passwd haiyun</span><br><span class="line">    haiyun<img class="github-emoji" title="x" alt="x" src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8" height="20" width="20">1004:1004:haiyun,haiyun,100,101:/home/haiyun:/bin/csh</span><br></pre></td></tr></table></figure>
<h3 id="创建组：groupadd"><a href="#创建组：groupadd" class="headerlink" title="创建组：groupadd"></a>创建组：groupadd</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"> groupadd [OPTION]... group_name</span><br><span class="line">    -g GID: 指明GID号； [GID_MIN, GID_MAX]</span><br><span class="line">    -r: 创建系统组</span><br><span class="line">        CentOS 6: ID&lt;500</span><br><span class="line">        CentOS 7: ID&lt;1000</span><br><span class="line"></span><br><span class="line">范例1：新建一个名为group1的用户组</span><br><span class="line">    [root@centos7 ~]# groupadd group1 </span><br><span class="line">    [root@centos7 ~]# getent group group1</span><br><span class="line">    group1<img class="github-emoji" title="x" alt="x" src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8" height="20" width="20">1006:</span><br><span class="line"></span><br><span class="line">范例2：新建一个名为tset的系统组</span><br><span class="line">    [root@centos7 ~]#  groupadd -r tset</span><br><span class="line">    [root@centos7 ~]# getent group tset</span><br><span class="line">    tset<img class="github-emoji" title="x" alt="x" src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8" height="20" width="20">984:</span><br></pre></td></tr></table></figure>
<h3 id="修改组：groupmod"><a href="#修改组：groupmod" class="headerlink" title="修改组：groupmod"></a>修改组：groupmod</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">组属性修改： groupmod</span><br><span class="line">groupmod [OPTION]... group</span><br><span class="line">    -n group_name: 新名字</span><br><span class="line">    -g GID: 新的GID</span><br><span class="line"></span><br><span class="line">范例：将刚才上个命令创建的group1名臣修改为mygroup，GID为666</span><br><span class="line">    [root@centos7 ~]# getent group group1</span><br><span class="line">    group1<img class="github-emoji" title="x" alt="x" src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8" height="20" width="20">1006:</span><br><span class="line">    [root@centos7 ~]# groupmod -g 666 -n mygroup group1 </span><br><span class="line">    [root@centos7 ~]# getent group mygroup</span><br><span class="line">    mygroup<img class="github-emoji" title="x" alt="x" src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8" height="20" width="20">666:</span><br></pre></td></tr></table></figure>
<h3 id="组删除：-groupdel"><a href="#组删除：-groupdel" class="headerlink" title="组删除： groupdel"></a>组删除： groupdel</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">groupdel [groupname]</span><br><span class="line"></span><br><span class="line">范例：删除组mygroup</span><br><span class="line">[root@centos7 ~]# groupdel mygroup</span><br></pre></td></tr></table></figure>
<h3 id="更改组密码：gpasswd"><a href="#更改组密码：gpasswd" class="headerlink" title="更改组密码：gpasswd"></a>更改组密码：gpasswd</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">gpasswd [OPTION] GROUP</span><br><span class="line">    -a user: 将user添加至指定组中</span><br><span class="line">    -d user: 从指定组中移除用户user</span><br><span class="line">    -A user1,user2,...: 设置有管理权限的用户列表</span><br><span class="line">    -M user1,user2：将某些账号加入这个用户组中</span><br><span class="line"></span><br><span class="line">范例1：新建一个用户组，名为testgroup且用户组交给haiyun管理</span><br><span class="line">[root@centos7 ~]# groupadd testgroup</span><br><span class="line">[root@centos7 ~]# gpasswd testgroup</span><br><span class="line">Changing the password for group testgroup</span><br><span class="line">New Password: </span><br><span class="line">Re-enter new password: </span><br><span class="line">[root@centos7 ~]# gpasswd -A haiyun testgroup   &lt;==加入用户组管理员为haiyun</span><br><span class="line">[root@centos7 ~]# getent gshadow testgroup</span><br><span class="line">testgroup:$6$jLCPW/52OqN/LV$XSUnOXNHbAnCTo.q1yTYeC.qvQqoXYs5oGC7kURAOW1AY755dYJQBJpieAQSFiiaQkgm2Akrf7FqIMMkQYrrX/:haiyun:</span><br><span class="line"></span><br><span class="line">范例2：以haiyun登陆系统，并且让他加入haiyun1，haiyun2成为testgroup成员</span><br><span class="line">[root@centos7 ~]# id haiyun1        &lt;==确认haiyun1存在且没有加入testgroup组</span><br><span class="line">uid=1006(haiyun1) gid=1007(haiyun1) groups=1007(haiyun1)</span><br><span class="line">[root@centos7 ~]# id haiyun2        &lt;==确认haiyun2存在且没有加入testgroup组</span><br><span class="line">uid=1007(haiyun2) gid=1008(haiyun2) groups=1008(haiyun2)</span><br><span class="line">[root@centos7 ~]# su - haiyun       &lt;==切换到haiyun用户</span><br><span class="line">Last login: Sun Aug 13 14:56:49 CST 2017 on pts/0</span><br><span class="line">[haiyun@centos7 ~]$ gpasswd -a haiyun1 testgroup        &lt;==将用户haiyun1加入到testgroup组</span><br><span class="line">Adding user haiyun1 to group testgroup</span><br><span class="line">[haiyun@centos7 ~]$ gpasswd -a haiyun2 testgroup        &lt;==将用户haiyun2加入到testgroup组</span><br><span class="line">Adding user haiyun2 to group testgroup  </span><br><span class="line">[root@centos7 ~]# getent group testgroup                &lt;==确认添加成功</span><br><span class="line">testgroup<img class="github-emoji" title="x" alt="x" src="https://github.githubassets.com/images/icons/emoji/unicode/274c.png?v8" height="20" width="20">1006:haiyun1,haiyun2</span><br></pre></td></tr></table></figure>
<h3 id="newgrp命令：临时切换主组"><a href="#newgrp命令：临时切换主组" class="headerlink" title="newgrp命令：临时切换主组"></a>newgrp命令：临时切换主组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">newgrp命令：临时切换主组，如果用户本不属于此组，则需要组密码</span><br><span class="line"></span><br><span class="line">范例1：临时切换到root组</span><br><span class="line">[root@centos7 ~]# gpasswd root          &lt;==为root组设置密码</span><br><span class="line">Changing the password for group root</span><br><span class="line">New Password: </span><br><span class="line">Re-enter new password: </span><br><span class="line">[root@centos7 ~]# su - haiyun           &lt;==切换到haiyun</span><br><span class="line">Last login: Sun Aug 13 16:00:31 CST 2017 on pts/0</span><br><span class="line">[haiyun@centos7 ~]$ id                  &lt;==未切换前的主组</span><br><span class="line">uid=1004(haiyun) gid=1004(haiyun) groups=1004(haiyun) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</span><br><span class="line">[haiyun@centos7 ~]$ newgrp root         &lt;==临时切换主组</span><br><span class="line">Password: </span><br><span class="line">[haiyun@centos7 ~]$ id                  &lt;==切换成功</span><br><span class="line">uid=1004(haiyun) gid=0(root) groups=0(root),1004(haiyun) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</span><br></pre></td></tr></table></figure>
<h3 id="更改和查看组成员"><a href="#更改和查看组成员" class="headerlink" title="更改和查看组成员"></a>更改和查看组成员</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">groupmems [options] [action]</span><br><span class="line">options：</span><br><span class="line">    -g, --group groupname 更改为指定组 (只有root)</span><br><span class="line">    Actions:</span><br><span class="line">    -a, --add username 指定用户加入组</span><br><span class="line">    -d, --delete username 从组中删除用户</span><br><span class="line">    -p, --purge 从组中清除所有成员</span><br><span class="line">    -l, --list 显示组成员列表</span><br><span class="line">    </span><br><span class="line">范例1：查看testgroup组的成员</span><br><span class="line">[root@centos7 ~]# groupmems -l -g testgroup</span><br><span class="line">haiyun1  haiyun2 </span><br><span class="line"></span><br><span class="line">范例2：将haiyun3加入到testgroup组中</span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -a haiyun3</span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -l </span><br><span class="line">haiyun1  haiyun2  haiyun3 </span><br><span class="line"></span><br><span class="line">范例3：将haiyun2从testgroup中移除</span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -d haiyun2</span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -l </span><br><span class="line">haiyun1  haiyun3 </span><br><span class="line"></span><br><span class="line">范例4：清除testgroup组总的所有成员</span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -p </span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -l </span><br><span class="line">[root@centos7 ~]# </span><br><span class="line"></span><br><span class="line">groups [OPTION].[USERNAME]... 查看用户所属组列表</span><br><span class="line"></span><br><span class="line">范例：查看用户haiyun1加入的组</span><br><span class="line">[root@centos7 ~]# groups haiyun1</span><br><span class="line">haiyun1 : haiyun1 testgroup</span><br></pre></td></tr></table></figure>
<h3 id="将用户加入组的几种方法"><a href="#将用户加入组的几种方法" class="headerlink" title="将用户加入组的几种方法"></a>将用户加入组的几种方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">方法1：groupmems</span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -a haiyun</span><br><span class="line"></span><br><span class="line">方法2：usermod</span><br><span class="line">[root@centos7 ~]# usermod -G testgroup haiyun2 </span><br><span class="line"></span><br><span class="line">方法3：</span><br><span class="line">[root@centos7 ~]# gpasswd -a haiyun3 testgroup</span><br><span class="line">Adding user haiyun3 to group testgroup</span><br></pre></td></tr></table></figure>
<h3 id="多个用户添加到一个组"><a href="#多个用户添加到一个组" class="headerlink" title="多个用户添加到一个组"></a>多个用户添加到一个组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">范例：将haiyun，haiyun1，haiyun2，haiyun3添加到testgroup组</span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -l </span><br><span class="line">[root@centos7 ~]# gpasswd -M haiyun,haiyun1,haiyun2,haiyun3 testgroup</span><br><span class="line">[root@centos7 ~]# groupmems -g testgroup -l </span><br><span class="line">haiyun  haiyun1  haiyun2  haiyun3</span><br></pre></td></tr></table></figure>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>