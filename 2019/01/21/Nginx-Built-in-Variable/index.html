<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>NGINX内置变量参数详解 | Peter's technology stack.</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Nginx/">Nginx</a></div><div class="post-time">2019-01-21</div></div></div><div class="container post-header"><h1>NGINX内置变量参数详解</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#NGINX-内置变量参数详解"><span class="toc-number">1.</span> <span class="toc-text">NGINX 内置变量参数详解</span></a></li></ol></details></div><div class="container post-content"><h3 id="NGINX-内置变量参数详解"><a href="#NGINX-内置变量参数详解" class="headerlink" title="NGINX 内置变量参数详解"></a>NGINX 内置变量参数详解</h3><a id="more"></a>
<p>参考：<a href="http://nginx.org/en/docs/varindex.html" target="_blank" rel="noopener">http://nginx.org/en/docs/varindex.html</a> </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">args                    <span class="comment">#请求中的参数值</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">query_string            <span class="comment">#同 $args</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">arg_NAME                <span class="comment">#GET请求中NAME的值</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">is_args                 <span class="comment">#如果请求中有参数，值为"?"，否则为空字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">uri                     <span class="comment">#请求中的当前URI(不带请求参数，参数位于$args)，可以不同于浏览器传递的$request_uri的值，它可以通过内部重定向，或者使用index指令进行修改，$uri不包含主机名，如"/foo/bar.html"。</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">document_uri            <span class="comment">#同 $uri</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">document_root           <span class="comment">#当前请求的文档根目录或别名</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">host                    <span class="comment">#优先级：HTTP请求行的主机名&gt;"HOST"请求头字段&gt;符合请求的服务器名.请求中的主机头字段，如果请求中的主机头不可用，则为服务器处理请求的服务器名称</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">hostname                <span class="comment">#主机名</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">https                   <span class="comment">#如果开启了SSL安全模式，值为"on"，否则为空字符串。</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">binary_remote_addr      <span class="comment">#客户端地址的二进制形式，固定长度为4个字节</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">body_bytes_sent         <span class="comment">#传输给客户端的字节数，响应头不计算在内；这个变量和Apache的mod_log_config模块中的"%B"参数保持兼容</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">bytes_sent              <span class="comment">#传输给客户端的字节数</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">connection              <span class="comment">#TCP连接的序列号</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">connection_requests     <span class="comment">#TCP连接当前的请求数量</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">content_length          <span class="comment">#"Content-Length" 请求头字段</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">content_type            <span class="comment">#"Content-Type" 请求头字段</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">cookie_name             <span class="comment">#cookie名称</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">limit_rate              <span class="comment">#用于设置响应的速度限制</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">msec                    <span class="comment">#当前的Unix时间戳</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">nginx_version           <span class="comment">#nginx版本</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">pid                     <span class="comment">#工作进程的PID</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">pipe                    <span class="comment">#如果请求来自管道通信，值为"p"，否则为"."</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">proxy_protocol_addr     <span class="comment">#获取代理访问服务器的客户端地址，如果是直接访问，该值为空字符串</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">realpath_root           <span class="comment">#当前请求的文档根目录或别名的真实路径，会将所有符号连接转换为真实路径</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">remote_addr             <span class="comment">#客户端地址</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">remote_port             <span class="comment">#客户端端口</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">remote_user             <span class="comment">#用于HTTP基础认证服务的用户名</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request                 <span class="comment">#代表客户端的请求地址、方法和协议，如：GET /ff.php?a=13 HTTP/1.1</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request_body            <span class="comment">#客户端的请求主体：此变量可在location中使用，将请求主体通过proxy_pass，fastcgi_pass，uwsgi_pass和scgi_pass传递给下一级的代理服务器</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request_body_file       <span class="comment">#将客户端请求主体保存在临时文件中。文件处理结束后，此文件需删除。如果需要之一开启此功能，需要设置client_body_in_file_only。如果将次文件传 递给后端的代理服务器，需要禁用request body，即设置proxy_pass_request_body off，fastcgi_pass_request_body off，uwsgi_pass_request_body off，or scgi_pass_request_body off</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request_completion      <span class="comment">#如果请求成功，值为"OK"，如果请求未完成或者请求不是一个范围请求的最后一部分，则为空</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request_filename        <span class="comment">#当前连接请求的文件路径，由root或alias指令与URI请求生成</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request_length          <span class="comment">#请求的长度 (包括请求的地址，http请求头和请求主体)</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request_method          <span class="comment">#HTTP请求方法，通常为"GET"或"POST"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request_time            <span class="comment">#处理客户端请求使用的时间,单位为秒，精度毫秒； 从读入客户端的第一个字节开始，直到把最后一个字符发送给客户端后进行日志写入为止。</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">request_uri             <span class="comment">#这个变量等于包含一些客户端请求参数的原始URI，它无法修改，请查看$uri更改或重写URI，不包含主机名，例如："/index/test.php?arg=freemouse"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">scheme                  <span class="comment">#请求使用的Web协议，"http" 或 "https"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">server_addr             <span class="comment">#服务器端地址，需要注意的是：为了避免访问linux系统内核，应将ip地址提前设置在配置文件中</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">server_name             <span class="comment">#服务器名</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">server_port             <span class="comment">#服务器端口</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">server_protocol         <span class="comment">#服务器的HTTP版本，通常为 "HTTP/1.0" 或 "HTTP/1.1"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">status                  <span class="comment">#HTTP响应代码</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">time_iso8601            <span class="comment">#服务器时间的ISO 8610格式</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">time_local              <span class="comment">#服务器时间（LOG Format 格式）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">cookie_NAME             <span class="comment">#客户端请求Header头中的cookie变量，前缀"$cookie_"加上cookie名称的变量，该变量的值即为cookie名称的值</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">http_NAME               <span class="comment">#匹配任意请求头字段；变量名中的后半部分NAME可以替换成任意请求头字段，如在配置文件中需要获取http请求头："Accept-Language"，$http_accept_language即可</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">http_cookie</span></span><br><span class="line"><span class="meta">$</span><span class="bash">http_host               <span class="comment">#请求地址，即浏览器中你输入的地址（IP或域名）</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">http_referer            <span class="comment">#url跳转来源,用来记录从那个页面链接访问过来的</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">http_user_agent         <span class="comment">#用户终端浏览器等信息</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">http_x_forwarded_for</span></span><br><span class="line"><span class="meta">$</span><span class="bash">sent_http_NAME          <span class="comment">#可以设置任意http响应头字段；变量名中的后半部分NAME可以替换成任意响应头字段，如需要设置响应头Content-length，$sent_http_content_length即可</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">sent_http_cache_control</span></span><br><span class="line"><span class="meta">$</span><span class="bash">sent_http_connection</span></span><br><span class="line"><span class="meta">$</span><span class="bash">sent_http_content_type</span></span><br><span class="line"><span class="meta">$</span><span class="bash">sent_http_keep_alive</span></span><br><span class="line"><span class="meta">$</span><span class="bash">sent_http_last_modified</span></span><br><span class="line"><span class="meta">$</span><span class="bash">sent_http_location</span></span><br><span class="line"><span class="meta">$</span><span class="bash">sent_http_transfer_encoding</span></span><br></pre></td></tr></table></figure>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>