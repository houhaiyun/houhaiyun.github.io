<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Peter's technology stack."><title>The TICK Stack | Keep learn!</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a class="sidebar-nav-item active" href="/">Home</a><a class="sidebar-nav-item" href="/archives">Archives</a><a class="sidebar-nav-item" href="/about">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/Tick-Stack/">Tick Stack</a></div><div class="post-time">2019-07-17</div></div></div><div class="container post-header"><h1>The TICK Stack</h1></div><div class="container post-toc"><details class="toc"><summary class="toc-accordion">Table of Contents</summary><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Components-of-the-TICK-Stack"><span class="toc-number">1.</span> <span class="toc-text">Components of the TICK Stack</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Telegraf"><span class="toc-number">1.1.</span> <span class="toc-text">Telegraf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#InfluxDB"><span class="toc-number">1.2.</span> <span class="toc-text">InfluxDB</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Chronograf"><span class="toc-number">1.3.</span> <span class="toc-text">Chronograf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Kapacitor"><span class="toc-number">1.4.</span> <span class="toc-text">Kapacitor</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TICK-Stack-Diagram"><span class="toc-number">2.</span> <span class="toc-text">TICK Stack Diagram</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Deploy-TICK-Stack"><span class="toc-number"></span> <span class="toc-text">Deploy TICK Stack</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-InfluxDB"><span class="toc-number"></span> <span class="toc-text">Installing InfluxDB</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#InfluxDB-installation-requirements"><span class="toc-number">1.</span> <span class="toc-text">InfluxDB installation requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#InfluxDB-networking-ports"><span class="toc-number">2.</span> <span class="toc-text">InfluxDB networking ports</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Network-Time-Protocol-NTP"><span class="toc-number">3.</span> <span class="toc-text">Network Time Protocol (NTP)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Installing-InfluxDB-1"><span class="toc-number">4.</span> <span class="toc-text">Installing InfluxDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Configuring-InfluxDB"><span class="toc-number">5.</span> <span class="toc-text">Configuring InfluxDB</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Data-and-WAL-directory-permissions"><span class="toc-number">6.</span> <span class="toc-text">Data and WAL directory permissions</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-Kapacitor"><span class="toc-number"></span> <span class="toc-text">Installing Kapacitor</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Requirements"><span class="toc-number">1.</span> <span class="toc-text">Requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Networking"><span class="toc-number">2.</span> <span class="toc-text">Networking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Installation"><span class="toc-number">3.</span> <span class="toc-text">Installation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Starting-the-Kapacitor-service"><span class="toc-number">4.</span> <span class="toc-text">Starting the Kapacitor service</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Configuration"><span class="toc-number">5.</span> <span class="toc-text">Configuration</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Time-zone"><span class="toc-number">6.</span> <span class="toc-text">Time zone</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#systemd"><span class="toc-number">6.1.</span> <span class="toc-text">systemd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#docker"><span class="toc-number">6.2.</span> <span class="toc-text">docker</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-Chronograf"><span class="toc-number"></span> <span class="toc-text">Installing Chronograf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Download-and-install"><span class="toc-number">1.</span> <span class="toc-text">Download and install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Start-Chronograf"><span class="toc-number">2.</span> <span class="toc-text">Start Chronograf</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Connect-Chronograf-to-your-InfluxDB-instance-or-InfluxDB-Enterprise-cluster"><span class="toc-number">3.</span> <span class="toc-text">Connect Chronograf to your InfluxDB instance or InfluxDB Enterprise cluster</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Connect-Chronograf-to-Kapacitor"><span class="toc-number">4.</span> <span class="toc-text">Connect Chronograf to Kapacitor</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Installing-Telegraf"><span class="toc-number"></span> <span class="toc-text">Installing Telegraf</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Requirements-1"><span class="toc-number">1.</span> <span class="toc-text">Requirements</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Networking-1"><span class="toc-number">2.</span> <span class="toc-text">Networking</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NTP"><span class="toc-number">3.</span> <span class="toc-text">NTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Installation-1"><span class="toc-number">4.</span> <span class="toc-text">Installation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Configuration-1"><span class="toc-number">5.</span> <span class="toc-text">Configuration</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Access-test"><span class="toc-number"></span> <span class="toc-text">Access test</span></a></details></div><div class="container post-content"><p>Website：<a href="https://www.influxdata.com/time-series-platform/" target="_blank" rel="noopener">https://www.influxdata.com/time-series-platform/</a></p>
<p>TICK Stack 是一系列相关技术，它们结合在一起，提供了一个存储，捕获，监控和可视化的时间序列的平台。</p>
<a id="more"></a>
<h3 id="Components-of-the-TICK-Stack"><a href="#Components-of-the-TICK-Stack" class="headerlink" title="Components of the TICK Stack"></a>Components of the TICK Stack</h3><h4 id="Telegraf"><a href="#Telegraf" class="headerlink" title="Telegraf"></a>Telegraf</h4><p>Telegraf是一个插件驱动的服务器代理，用于收集和报告指标。 Telegraf插件直接从其运行的系统中提取各种指标，从第三方API中提取指标，甚至通过StatsD和Kafka消费者服务来监听指标。 它还具有输出插件，可将指标发送到各种其他数据存储，服务和消息队列，包括InfluxDB，Graphite，OpenTSDB，Datadog，Librato，Kafka，MQTT，NSQ等等。</p>
<p><a href="https://influxdata.com/time-series-platform/telegraf/" target="_blank" rel="noopener">Learn more</a> | <a href="https://docs.influxdata.com/telegraf/latest/" target="_blank" rel="noopener">Documentation</a> | <a href="https://docs.influxdata.com/telegraf/latest/introduction/getting-started/" target="_blank" rel="noopener">Getting Started</a></p>
<h4 id="InfluxDB"><a href="#InfluxDB" class="headerlink" title="InfluxDB"></a>InfluxDB</h4><p>InfluxDB是一个时间序列数据库，从头开始构建，用于处理高写入和查询负载。 InfluxDB是专为时间戳数据编写的自定义高性能数据存储，尤其适用于DevOps监控，物联网监控和实时分析等用例。 通过配置InfluxDB以在指定的时间段内保留数据，并自动过期并从系统中删除不需要的数据，节省机器上的空间。 InfluxDB还提供类似SQL的查询语言，用于与数据交互。</p>
<p><a href="https://influxdata.com/get-influxdb/" target="_blank" rel="noopener">Download</a> | <a href="https://docs.influxdata.com/influxdb/latest/" target="_blank" rel="noopener">Documentation</a> | <a href="https://docs.influxdata.com/influxdb/latest/introduction/getting-started/" target="_blank" rel="noopener">Getting Started</a></p>
<h4 id="Chronograf"><a href="#Chronograf" class="headerlink" title="Chronograf"></a>Chronograf</h4><p>Chronograf是堆栈的管理用户界面和可视化引擎。 它可以轻松设置和维护基础架构的监控和警报。 它使用简单，包括模板和库，使您可以快速构建仪表板，实现数据的实时可视化，并轻松创建警报和自动化规则。</p>
<p><a href="https://influxdata.com/time-series-platform/chronograf/" target="_blank" rel="noopener">Learn more</a> | <a href="https://docs.influxdata.com/chronograf/latest/" target="_blank" rel="noopener">Documentation</a> | <a href="https://docs.influxdata.com/chronograf/latest/introduction/getting-started/" target="_blank" rel="noopener">Getting Started</a></p>
<h4 id="Kapacitor"><a href="#Kapacitor" class="headerlink" title="Kapacitor"></a>Kapacitor</h4><p>Kapacitor是一种原生数据处理引擎。 它可以处理来自InfluxDB的流和批量数据。 Kapacitor允许您插入自己的自定义逻辑或用户定义的函数来处理具有动态阈值的警报，匹配模式的度量标准，计算统计异常，并根据这些警报执行特定操作，如动态负载重新平衡。 Kapacitor集成了HipChat，OpsGenie，Alerta，Sensu，PagerDuty，Slack等。</p>
<p><a href="https://influxdata.com/time-series-platform/kapacitor/" target="_blank" rel="noopener">Learn more</a> | <a href="https://docs.influxdata.com/kapacitor/latest/" target="_blank" rel="noopener">Documentation</a> | <a href="https://docs.influxdata.com/kapacitor/latest/introduction/getting-started/" target="_blank" rel="noopener">Getting Started</a></p>
<h3 id="TICK-Stack-Diagram"><a href="#TICK-Stack-Diagram" class="headerlink" title="TICK Stack Diagram"></a>TICK Stack Diagram</h3><center><img src="https://houhaiyun.github.io/img/images/InfluxDB_Diagram.png" title="TICK Stack Diagram"></center>

<h1 id="Deploy-TICK-Stack"><a href="#Deploy-TICK-Stack" class="headerlink" title="Deploy TICK Stack"></a>Deploy TICK Stack</h1><h2 id="Installing-InfluxDB"><a href="#Installing-InfluxDB" class="headerlink" title="Installing InfluxDB"></a>Installing InfluxDB</h2><h3 id="InfluxDB-installation-requirements"><a href="#InfluxDB-installation-requirements" class="headerlink" title="InfluxDB installation requirements"></a>InfluxDB installation requirements</h3><p>Installation of the InfluxDB package may require <code>root</code> or administrator privileges in order to complete successfully.</p>
<h3 id="InfluxDB-networking-ports"><a href="#InfluxDB-networking-ports" class="headerlink" title="InfluxDB networking ports"></a>InfluxDB networking ports</h3><p>By default, InfluxDB uses the following network ports:</p>
<ul>
<li>TCP port <code>8086</code> is available for client-server communication using the InfluxDB API.</li>
<li>TCP port <code>8088</code> is available for the RPC service to perform back up and restore operations.</li>
</ul>
<p>In addition to the ports above, InfluxDB also offers multiple plugins that may require <a href="https://docs.influxdata.com/influxdb/v1.7/administration/ports/" target="_blank" rel="noopener">custom ports</a>. All port mappings can be modified through the <a href="https://docs.influxdata.com/influxdb/v1.7/administration/config" target="_blank" rel="noopener">configuration file</a>, which is located at <code>/etc/influxdb/influxdb.conf</code> for default installations.</p>
<h3 id="Network-Time-Protocol-NTP"><a href="#Network-Time-Protocol-NTP" class="headerlink" title="Network Time Protocol (NTP)"></a>Network Time Protocol (NTP)</h3><p>InfluxDB uses a host’s local time in UTC to assign timestamps to data and for coordination purposes. Use the Network Time Protocol (NTP) to synchronize time between hosts; if hosts’ clocks aren’t synchronized with NTP, the timestamps on the data written to InfluxDB can be inaccurate.</p>
<h3 id="Installing-InfluxDB-1"><a href="#Installing-InfluxDB-1" class="headerlink" title="Installing InfluxDB"></a>Installing InfluxDB</h3><p>Red Hat and CentOS users can install the latest stable version of InfluxDB using the <code>yum</code>package manager:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/influxdb.repo</span><br><span class="line">[influxdb]</span><br><span class="line">name = InfluxDB Repository - RHEL \<span class="variable">$releasever</span></span><br><span class="line">baseurl = https://repos.influxdata.com/rhel/\<span class="variable">$releasever</span>/\<span class="variable">$basearch</span>/stable</span><br><span class="line">enabled = 1</span><br><span class="line">gpgcheck = 1</span><br><span class="line">gpgkey = https://repos.influxdata.com/influxdb.key</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>Once repository is added to the <code>yum</code> configuration, install and start the InfluxDB service by running:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install influxdb</span><br><span class="line">sudo service influxdb start</span><br></pre></td></tr></table></figure>
<p>Or if your operating system is using systemd (CentOS 7+, RHEL 7+):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install influxdb</span><br><span class="line">sudo systemctl start influxdb</span><br></pre></td></tr></table></figure>
<h3 id="Configuring-InfluxDB"><a href="#Configuring-InfluxDB" class="headerlink" title="Configuring InfluxDB"></a>Configuring InfluxDB</h3><p>The system has internal defaults for every configuration file setting. View the default configuration settings with the <code>influxd config</code> command.</p>
<p>Most of the settings in the local configuration file (<code>/etc/influxdb/influxdb.conf</code>) are commented out; all commented-out settings will be determined by the internal defaults. Any uncommented settings in the local configuration file override the internal defaults. Note that the local configuration file does not need to include every configuration setting.</p>
<p>There are two ways to launch InfluxDB with your configuration file:</p>
<ul>
<li><p>Point the process to the correct configuration file by using the <code>-config</code> option:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">influxd -config /etc/influxdb/influxdb.conf</span><br></pre></td></tr></table></figure>
</li>
<li><p>Set the environment variable <code>INFLUXDB_CONFIG_PATH</code> to the path of your configuration file and start the process. For example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo $INFLUXDB_CONFIG_PATH</span><br><span class="line">/etc/influxdb/influxdb.conf</span><br><span class="line"></span><br><span class="line">influxd</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>InfluxDB first checks for the <code>-config</code> option and then for the environment variable.</p>
<p>See the <a href="https://docs.influxdata.com/influxdb/v1.7/administration/config/" target="_blank" rel="noopener">Configuration</a> documentation for more information.</p>
<h3 id="Data-and-WAL-directory-permissions"><a href="#Data-and-WAL-directory-permissions" class="headerlink" title="Data and WAL directory permissions"></a>Data and WAL directory permissions</h3><p>Make sure the directories in which data and the <a href="https://docs.influxdata.com/influxdb/v1.7/concepts/glossary#wal-write-ahead-log" target="_blank" rel="noopener">write ahead log</a> (WAL) are stored are writable for the user running the <code>influxd</code> service.</p>
<blockquote>
<p><strong>Note:</strong> If the data and WAL directories are not writable, the <code>influxd</code> service will not start.</p>
</blockquote>
<p>Information about <code>data</code> and <code>wal</code> directory paths is available in the <a href="https://docs.influxdata.com/influxdb/v1.7/administration/config/#data-settings" target="_blank" rel="noopener">Data settings</a> section of the <a href="https://docs.influxdata.com/influxdb/v1.7/administration/config/" target="_blank" rel="noopener">Configuring InfluxDB</a> documentation.</p>
<h2 id="Installing-Kapacitor"><a href="#Installing-Kapacitor" class="headerlink" title="Installing Kapacitor"></a>Installing Kapacitor</h2><h3 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h3><p>Installation of the InfluxDB package may require <code>root</code> or administrator privileges in order to complete successfully.</p>
<h3 id="Networking"><a href="#Networking" class="headerlink" title="Networking"></a>Networking</h3><p>Kapacitor listens on TCP port <code>9092</code> for all API and write calls.</p>
<p>Kapacitor may also bind to randomized UDP ports for handling of InfluxDB data via subscriptions.</p>
<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><p>Kapacitor has two binaries:</p>
<ul>
<li>kapacitor: a CLI program for calling the Kapacitor API.</li>
<li>kapacitord: the Kapacitor server daemon.</li>
</ul>
<p>You can download the binaries directly from the <a href="https://portal.influxdata.com/downloads" target="_blank" rel="noopener">downloads</a> page.</p>
<p>Use yum to install as follows:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.influxdata.com/kapacitor/releases/kapacitor-1.5.3.x86_64.rpm</span><br><span class="line">sudo yum localinstall kapacitor-1.5.3.x86_64.rpm</span><br></pre></td></tr></table></figure>
<h3 id="Starting-the-Kapacitor-service"><a href="#Starting-the-Kapacitor-service" class="headerlink" title="Starting the Kapacitor service"></a>Starting the Kapacitor service</h3><p>To start the Kapacitor service, run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start kapacitor</span><br></pre></td></tr></table></figure>
<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><p>An example configuration file can be found <a href="https://github.com/influxdb/kapacitor/blob/master/etc/kapacitor/kapacitor.conf" target="_blank" rel="noopener">here</a></p>
<p>Kapacitor can also provide an example configuration for you using this command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kapacitord config</span><br></pre></td></tr></table></figure>
<p>To generate a new configuration file, run:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kapacitord config &gt; kapacitor.generated.conf</span><br></pre></td></tr></table></figure>
<h3 id="Time-zone"><a href="#Time-zone" class="headerlink" title="Time zone"></a>Time zone</h3><p>To display alerts notifications using a preferred time zone, either change the time zone of the host on which Kapacitor is running or set the Kapacitor process’ <code>TZ</code> environment variable.</p>
<h4 id="systemd"><a href="#systemd" class="headerlink" title="systemd"></a>systemd</h4><p>Add the environment variable using <code>systemctl edit kapacitor</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[Service]</span><br><span class="line">Environment=&quot;TZ=Asia/Shanghai&quot;</span><br></pre></td></tr></table></figure>
<h4 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h4><p>Set the environment variable using the <code>-e</code> flag when starting the container (<code>-e TZ=Asia/Shanghai</code>) or in your <code>docker-compose.yml</code>.</p>
<h2 id="Installing-Chronograf"><a href="#Installing-Chronograf" class="headerlink" title="Installing Chronograf"></a>Installing Chronograf</h2><h3 id="Download-and-install"><a href="#Download-and-install" class="headerlink" title="Download and install"></a>Download and install</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.influxdata.com/chronograf/releases/chronograf-1.7.12.x86_64.rpm</span><br><span class="line">sudo yum localinstall chronograf-1.7.12.x86_64.rpm</span><br></pre></td></tr></table></figure>
<h3 id="Start-Chronograf"><a href="#Start-Chronograf" class="headerlink" title="Start Chronograf"></a>Start Chronograf</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chronograf</span><br></pre></td></tr></table></figure>
<h3 id="Connect-Chronograf-to-your-InfluxDB-instance-or-InfluxDB-Enterprise-cluster"><a href="#Connect-Chronograf-to-your-InfluxDB-instance-or-InfluxDB-Enterprise-cluster" class="headerlink" title="Connect Chronograf to your InfluxDB instance or InfluxDB Enterprise cluster"></a>Connect Chronograf to your InfluxDB instance or InfluxDB Enterprise cluster</h3><ol>
<li>Point your web browser to <a href="http://localhost:8888/" target="_blank" rel="noopener">localhost:8888</a>.</li>
<li>Fill out the form with the following details:<ul>
<li><strong>Connection String</strong>: Enter the hostname or IP of the machine that InfluxDB is running on, and be sure to include InfluxDB’s default port <code>8086</code>.</li>
<li><strong>Connection Name</strong>: Enter a name for your connection string.</li>
<li><strong>Username</strong> and <strong>Password</strong>: These fields can remain blank unless you’ve <a href="https://docs.influxdata.com/influxdb/v1.6/administration/config/#auth-enabled-false" target="_blank" rel="noopener">enabled authorization</a> in InfluxDB.</li>
<li><strong>Telegraf Database Name</strong>: Optionally, enter a name for your Telegraf database. The default name is Telegraf.</li>
</ul>
</li>
<li>Click <strong>Add Source</strong>.</li>
</ol>
<h3 id="Connect-Chronograf-to-Kapacitor"><a href="#Connect-Chronograf-to-Kapacitor" class="headerlink" title="Connect Chronograf to Kapacitor"></a>Connect Chronograf to Kapacitor</h3><ol>
<li>In Chronograf, click the configuration (wrench) icon in the sidebar menu, then select <strong>Add Config</strong> in the <strong>Active Kapacitator</strong> column.</li>
<li>In the <strong>Kapacitor URL</strong> field, enter the hostname or IP of the machine that Kapacitor is running on. Be sure to include Kapacitor’s default port: <code>9092</code>.</li>
<li>Enter a name for your connection.</li>
<li>Leave the <strong>Username</strong> and <strong>Password</strong> fields blank unless you’ve specifically enabled authorization in Kapacitor.</li>
<li>Click <strong>Connect</strong>.</li>
</ol>
<h2 id="Installing-Telegraf"><a href="#Installing-Telegraf" class="headerlink" title="Installing Telegraf"></a>Installing Telegraf</h2><h3 id="Requirements-1"><a href="#Requirements-1" class="headerlink" title="Requirements"></a>Requirements</h3><p>Installation of the Telegraf package may require <code>root</code> or administrator privileges in order to complete successfully.</p>
<h3 id="Networking-1"><a href="#Networking-1" class="headerlink" title="Networking"></a>Networking</h3><p>Telegraf offers multiple service <a href="https://docs.influxdata.com/telegraf/v1.11/plugins/inputs/" target="_blank" rel="noopener">input plugins</a> that may require custom ports. All port mappings can be modified through the configuration file, which is located at <code>/etc/telegraf/telegraf.conf</code>for default installations.</p>
<h3 id="NTP"><a href="#NTP" class="headerlink" title="NTP"></a>NTP</h3><p>Telegraf uses a host’s local time in UTC to assign timestamps to data. Use the Network Time Protocol (NTP) to synchronize time between hosts; if hosts’ clocks aren’t synchronized with NTP, the timestamps on the data can be inaccurate.</p>
<h3 id="Installation-1"><a href="#Installation-1" class="headerlink" title="Installation"></a>Installation</h3><p><strong>RedHat and CentOS:</strong> Install the latest stable version of Telegraf using the <code>yum</code> package manager:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/influxdb.repo</span><br><span class="line">[influxdb]</span><br><span class="line">name = InfluxDB Repository - RHEL \<span class="variable">$releasever</span></span><br><span class="line">baseurl = https://repos.influxdata.com/rhel/\<span class="variable">$releasever</span>/\<span class="variable">$basearch</span>/stable</span><br><span class="line">enabled = 1</span><br><span class="line">gpgcheck = 1</span><br><span class="line">gpgkey = https://repos.influxdata.com/influxdb.key</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<p>Once repository is added to the <code>yum</code> configuration, install and start the Telegraf service by running:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install telegraf</span><br><span class="line">sudo service telegraf start</span><br></pre></td></tr></table></figure>
<p>Or if your operating system is using systemd (CentOS 7+, RHEL 7+):</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install telegraf</span><br><span class="line">sudo systemctl start telegraf</span><br><span class="line"></span><br><span class="line">/usr/bin/telegraf --config /etc/telegraf/telegraf.conf --config-directory /etc/telegraf/telegraf.d --<span class="built_in">test</span>		<span class="comment"># 测试配置文件</span></span><br></pre></td></tr></table></figure>
<h3 id="Configuration-1"><a href="#Configuration-1" class="headerlink" title="Configuration"></a>Configuration</h3><p>Edit <code>/etc/telegraf/telegraf.conf</code>，我们在这里简单修改，只是为了演示。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/telegraf/telegraf.conf	<span class="comment"># 如下指定了telefraf输出的配置</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">#                            OUTPUT PLUGINS                                   #</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line">[[outputs.influxdb]]</span><br><span class="line">urls = [<span class="string">"http://127.0.0.1:8086"</span>]</span><br><span class="line">database = <span class="string">"telegraf"</span></span><br></pre></td></tr></table></figure>
<p>Restart Server:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart telegraf</span><br></pre></td></tr></table></figure>
<h2 id="Access-test"><a href="#Access-test" class="headerlink" title="Access test"></a>Access test</h2><p><a href="http://yourip:8080" target="_blank" rel="noopener">http://yourip:8080</a></p>
<p>第一次打开会提示连接 InfluxDB、Kapacitor 全部点击默认。</p>
<p>完成后，会出现如下界面，表示成功。</p>
<p><img src="https://houhaiyun.github.io/img/images/Test_Access_TICK1.png" alt="Test access"><br><img src="https://houhaiyun.github.io/img/images/Test_Access_TICK2.png" alt="Test access"></p>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
  $(".fancybox").fancybox();
});
</script></body></html>